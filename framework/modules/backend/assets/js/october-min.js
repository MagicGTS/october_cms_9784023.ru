function unregisterServiceWorkers(){"https:"===location.protocol&&navigator.serviceWorker.getRegistrations().then((function(registrations){for(var index=0;index<registrations.length;index++)registrations[index].unregister({immediate:!0})}))}!function($){$.fn.touchwipe=function(settings){var config={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return settings&&$.extend(config,settings),this.each((function(){var startX,startY,isMoving=!1;function cancelTouch(){this.removeEventListener("touchmove",onTouchMove),startX=null,isMoving=!1}function onTouchMove(e){if(config.preventDefaultEvents&&e.preventDefault(),isMoving){var x=e.touches[0].pageX,y=e.touches[0].pageY,dx=startX-x,dy=startY-y;Math.abs(dx)>=config.min_move_x?(cancelTouch(),dx>0?config.wipeLeft():config.wipeRight()):Math.abs(dy)>=config.min_move_y&&(cancelTouch(),dy>0?config.wipeDown():config.wipeUp())}}"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",(function(e){1==e.touches.length&&(startX=e.touches[0].pageX,startY=e.touches[0].pageY,isMoving=!0,this.addEventListener("touchmove",onTouchMove,!1))}),!1)})),this}}(jQuery),function($){var liveUpdaterIntervalId,liveUpdatingTargetSelectors={},liveUpdaterRunning=!1,defaultSettings={ellipsis:"...",setTitle:"never",live:!1};function ellipsisOnElement(containerElement,settings){var containerData=containerElement.data("jqae");containerData||(containerData={});var wrapperElement=containerData.wrapperElement;wrapperElement||(wrapperElement=containerElement.wrapInner("<div/>").find(">div")).css({margin:0,padding:0,border:0});var wrapperElementData=wrapperElement.data("jqae");wrapperElementData||(wrapperElementData={});var wrapperOriginalContent=wrapperElementData.originalContent;wrapperOriginalContent?wrapperElement=wrapperElementData.originalContent.clone(!0).data("jqae",{originalContent:wrapperOriginalContent}).replaceAll(wrapperElement):wrapperElement.data("jqae",{originalContent:wrapperElement.clone(!0)}),containerElement.data("jqae",{wrapperElement:wrapperElement,containerWidth:containerElement.width(),containerHeight:containerElement.height()});var containerElementHeight=containerElement.height(),wrapperOffset=(parseInt(containerElement.css("padding-top"),10)||0)+(parseInt(containerElement.css("border-top-width"),10)||0)-(wrapperElement.offset().top-containerElement.offset().top),deferAppendEllipsis=!1,selectedElements=wrapperElement;settings.selector&&(selectedElements=$(wrapperElement.find(settings.selector).get().reverse())),selectedElements.each((function(){var selectedElement=$(this),originalText=selectedElement.text(),ellipsisApplied=!1;if(wrapperElement.innerHeight()-selectedElement.innerHeight()>containerElementHeight+wrapperOffset)selectedElement.remove();else if(removeLastEmptyElements(selectedElement),selectedElement.contents().length){for(deferAppendEllipsis&&(getLastTextNode(selectedElement).get(0).nodeValue+=settings.ellipsis,deferAppendEllipsis=!1);wrapperElement.innerHeight()>containerElementHeight+wrapperOffset;){if(!(ellipsisApplied=ellipsisOnLastTextNode(selectedElement))){deferAppendEllipsis=!0,selectedElement.remove();break}if(removeLastEmptyElements(selectedElement),!selectedElement.contents().length){deferAppendEllipsis=!0,selectedElement.remove();break}getLastTextNode(selectedElement).get(0).nodeValue+=settings.ellipsis}"onEllipsis"==settings.setTitle&&ellipsisApplied||"always"==settings.setTitle?selectedElement.attr("title",originalText):"never"!=settings.setTitle&&selectedElement.removeAttr("title")}}))}function ellipsisOnLastTextNode(element){var lastTextNode=getLastTextNode(element);if(lastTextNode.length){var text=lastTextNode.get(0).nodeValue,pos=text.lastIndexOf(" ");return pos>-1?(text=$.trim(text.substring(0,pos)),lastTextNode.get(0).nodeValue=text):lastTextNode.get(0).nodeValue="",!0}return!1}function getLastTextNode(element){if(element.contents().length){var lastNode=(contents=element.contents()).eq(contents.length-1);return lastNode.filter(textNodeFilter).length?lastNode:getLastTextNode(lastNode)}var contents;return element.append(""),(contents=element.contents()).eq(contents.length-1)}function removeLastEmptyElements(element){if(element.contents().length){var contents=element.contents(),lastNode=contents.eq(contents.length-1);if(lastNode.filter(textNodeFilter).length){var text=lastNode.get(0).nodeValue;return""==(text=$.trim(text))&&(lastNode.remove(),!0)}for(;removeLastEmptyElements(lastNode););return!lastNode.contents().length&&(lastNode.remove(),!0)}return!1}function textNodeFilter(){return 3===this.nodeType}$.fn.ellipsis=function(selector,options){var subjectElements,settings,targetSelector;return subjectElements=$(this),"string"!=typeof selector&&(options=selector,selector=void 0),(settings=$.extend({},defaultSettings,options)).selector=selector,subjectElements.each((function(){ellipsisOnElement($(this),settings)})),settings.live?function(targetSelector,settings){liveUpdatingTargetSelectors[targetSelector]=settings,liveUpdaterIntervalId||(liveUpdaterIntervalId=window.setInterval((function(){!function(){if(!liveUpdaterRunning){for(var targetSelector in liveUpdaterRunning=!0,liveUpdatingTargetSelectors)$(targetSelector).each((function(){var containerElement,containerData;(containerData=(containerElement=$(this)).data("jqae")).containerWidth==containerElement.width()&&containerData.containerHeight==containerElement.height()||ellipsisOnElement(containerElement,liveUpdatingTargetSelectors[targetSelector])}));liveUpdaterRunning=!1}}()}),200))}(subjectElements.selector,settings):(targetSelector=subjectElements.selector,liveUpdatingTargetSelectors[targetSelector]&&(delete liveUpdatingTargetSelectors[targetSelector],liveUpdatingTargetSelectors.length||liveUpdaterIntervalId&&(window.clearInterval(liveUpdaterIntervalId),liveUpdaterIntervalId=void 0))),this}}(jQuery),function($){$.waterfall=function(){var steps=[],dfrd=$.Deferred(),pointer=0;return $.each(arguments,(function(i,a){steps.push((function(){var d,args=[].slice.apply(arguments);"function"==typeof a?(d=a.apply(null,args))&&d.promise||(d=$.Deferred()[!1===d?"reject":"resolve"](d)):d=a&&a.promise?a:$.Deferred()[!1===a?"reject":"resolve"](a),d.fail((function(){dfrd.reject.apply(dfrd,[].slice.apply(arguments))})).done((function(data){pointer++,args.push(data),pointer==steps.length?dfrd.resolve.apply(dfrd,args):steps[pointer].apply(null,args)}))}))})),steps.length?steps[0]():dfrd.resolve(),dfrd}}(jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?factory(require("jquery")):factory(jQuery)}((function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function read(s,converter){var value=config.raw?s:function(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}(s);return $.isFunction(converter)?converter(value):value}var config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){if("number"==typeof(options=$.extend({},config.defaults,options)).expires){var days=options.expires,t=options.expires=new Date;t.setTime(+t+864e5*days)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var result=key?void 0:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||void 0===(cookie=read(cookie))||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return void 0!==$.cookie(key)&&($.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key))}})),function(){function e(e){return e&&e.__esModule?e.default:e}function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function s(e,i){return!i||"object"!=((n=i)&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof i?t(e):i;var n}var u;function c(e){return Array.isArray(e)||"[object Object]"=={}.toString.call(e)}function d(e){return!e||"object"!=typeof e&&"function"!=typeof e}u=function e(){var t=[].slice.call(arguments),i=!1;"boolean"==typeof t[0]&&(i=t.shift());var n=t[0];if(d(n))throw new Error("extendee must be an object");for(var r=t.slice(1),a=r.length,o=0;o<a;o++){var l=r[o];for(var s in l)if(Object.prototype.hasOwnProperty.call(l,s)){var u=l[s];if(i&&c(u)){var h=Array.isArray(u)?[]:{};n[s]=e(!0,Object.prototype.hasOwnProperty.call(n,s)&&!d(n[s])?n[s]:h,u)}else n[s]=u}}return n};var h=function(){"use strict";function e(){i(this,e)}return r(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this._callbacks=this._callbacks||{};var r=this._callbacks[e],a=!0,o=!1,l=void 0;if(r)try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;c.apply(this,i)}}catch(e){o=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+e,{args:i})),this}},{key:"makeEvent",value:function(e,t){var i={bubbles:!0,cancelable:!0,detail:t};if("function"==typeof window.CustomEvent)return new CustomEvent(e,i);var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),n}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var i=this._callbacks[e];if(!i)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var n=0;n<i.length;n++){var r=i[n];if(r===t){i.splice(n,1);break}}return this}}]),e}(),p={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,i){if(i)return{dzuuid:i.file.upload.uuid,dzchunkindex:i.index,dztotalfilesize:i.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:i.file.upload.totalChunkCount,dzchunkbyteoffset:i.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},binaryBody:!1,fallback:function(){var e;this.element.className="".concat(this.element.className," dz-browser-not-supported");var t=!0,i=!1,n=void 0;try{for(var r,a=this.element.getElementsByTagName("div")[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(/(^| )dz-message($| )/.test(o.className)){e=o,o.className="dz-message";break}}}catch(e){i=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}e||(e=f.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var l=e.getElementsByTagName("span")[0];return l&&(null!=l.textContent?l.textContent=this.options.dictFallbackMessage:null!=l.innerText&&(l.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,i,n){var r={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},a=e.width/e.height;null==t&&null==i?(t=r.srcWidth,i=r.srcHeight):null==t?t=i*a:null==i&&(i=t/a);var o=(t=Math.min(t,r.srcWidth))/(i=Math.min(i,r.srcHeight));if(r.srcWidth>t||r.srcHeight>i)if("crop"===n)a>o?(r.srcHeight=e.height,r.srcWidth=r.srcHeight*o):(r.srcWidth=e.width,r.srcHeight=r.srcWidth/o);else{if("contain"!==n)throw new Error("Unknown resizeMethod '".concat(n,"'"));a>o?i=t/a:t=i*a}return r.srcX=(e.width-r.srcWidth)/2,r.srcY=(e.height-r.srcHeight)/2,r.trgWidth=t,r.trgHeight=i,r},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:e('<div class="dz-file-preview dz-preview"> <div class="dz-image"><img data-dz-thumbnail=""></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size=""></span></div> <div class="dz-filename"><span data-dz-name=""></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress=""></span> </div> <div class="dz-error-message"><span data-dz-errormessage=""></span></div> <div class="dz-success-mark"> <svg width="54" height="54" fill="#fff"><path d="m10.207 29.793 4.086-4.086a1 1 0 0 1 1.414 0l5.586 5.586a1 1 0 0 0 1.414 0l15.586-15.586a1 1 0 0 1 1.414 0l4.086 4.086a1 1 0 0 1 0 1.414L22.707 42.293a1 1 0 0 1-1.414 0L10.207 31.207a1 1 0 0 1 0-1.414Z"/></svg> </div> <div class="dz-error-mark"> <svg width="54" height="54" fill="#fff"><path d="m26.293 20.293-7.086-7.086a1 1 0 0 0-1.414 0l-4.586 4.586a1 1 0 0 0 0 1.414l7.086 7.086a1 1 0 0 1 0 1.414l-7.086 7.086a1 1 0 0 0 0 1.414l4.586 4.586a1 1 0 0 0 1.414 0l7.086-7.086a1 1 0 0 1 1.414 0l7.086 7.086a1 1 0 0 0 1.414 0l4.586-4.586a1 1 0 0 0 0-1.414l-7.086-7.086a1 1 0 0 1 0-1.414l7.086-7.086a1 1 0 0 0 0-1.414l-4.586-4.586a1 1 0 0 0-1.414 0l-7.086 7.086a1 1 0 0 1-1.414 0Z"/></svg> </div> </div>'),drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){var t=this;e.previewElement=f.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);var i=!0,n=!1,r=void 0;try{for(var a,o=e.previewElement.querySelectorAll("[data-dz-name]")[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var l=a.value;l.textContent=e.name}}catch(e){n=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw r}}var s=!0,u=!1,c=void 0;try{for(var d,h=e.previewElement.querySelectorAll("[data-dz-size]")[Symbol.iterator]();!(s=(d=h.next()).done);s=!0)(l=d.value).innerHTML=this.filesize(e.size)}catch(e){u=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}this.options.addRemoveLinks&&(e._removeLink=f.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),e.previewElement.appendChild(e._removeLink));var p=function(i){var n=t;if(i.preventDefault(),i.stopPropagation(),e.status===f.UPLOADING)return f.confirm(t.options.dictCancelUploadConfirmation,(function(){return n.removeFile(e)}));var r=t;return t.options.dictRemoveFileConfirmation?f.confirm(t.options.dictRemoveFileConfirmation,(function(){return r.removeFile(e)})):t.removeFile(e)},m=!0,v=!1,y=void 0;try{for(var g,b=e.previewElement.querySelectorAll("[data-dz-remove]")[Symbol.iterator]();!(m=(g=b.next()).done);m=!0)g.value.addEventListener("click",p)}catch(e){v=!0,y=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw y}}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");var i=!0,n=!1,r=void 0;try{for(var a,o=e.previewElement.querySelectorAll("[data-dz-thumbnail]")[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var l=a.value;l.alt=e.name,l.src=t}}catch(e){n=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw r}}return setTimeout((function(){return e.previewElement.classList.add("dz-image-preview")}),1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"string"!=typeof t&&t.error&&(t=t.error);var i=!0,n=!1,r=void 0;try{for(var a,o=e.previewElement.querySelectorAll("[data-dz-errormessage]")[Symbol.iterator]();!(i=(a=o.next()).done);i=!0)a.value.textContent=t}catch(e){n=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw r}}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,i){var n=!0,r=!1,a=void 0;if(e.previewElement)try{for(var o,l=e.previewElement.querySelectorAll("[data-dz-uploadprogress]")[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value;"PROGRESS"===s.nodeName?s.value=t:s.style.width="".concat(t,"%")}}catch(e){r=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},f=function(n){"use strict";function o(n,r){var l,c,d,h;if(i(this,o),(l=s(this,(c=o,a(c)).call(this))).element=n,l.clickableElements=[],l.listeners=[],l.files=[],"string"==typeof l.element&&(l.element=document.querySelector(l.element)),!l.element||null==l.element.nodeType)throw new Error("Invalid dropzone element.");if(l.element.dropzone)throw new Error("Dropzone already attached.");o.instances.push(t(l)),l.element.dropzone=t(l);var f=null!=(h=o.optionsForElement(l.element))?h:{};if(l.options=e(u)(!0,{},p,f,null!=r?r:{}),l.options.previewTemplate=l.options.previewTemplate.replace(/\n*/g,""),l.options.forceFallback||!o.isBrowserSupported())return s(l,l.options.fallback.call(t(l)));if(null==l.options.url&&(l.options.url=l.element.getAttribute("action")),!l.options.url)throw new Error("No URL provided.");if(l.options.acceptedFiles&&l.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(l.options.uploadMultiple&&l.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");if(l.options.binaryBody&&l.options.uploadMultiple)throw new Error("You cannot set both: binaryBody and uploadMultiple.");return l.options.acceptedMimeTypes&&(l.options.acceptedFiles=l.options.acceptedMimeTypes,delete l.options.acceptedMimeTypes),null!=l.options.renameFilename&&(l.options.renameFile=function(e){return l.options.renameFilename.call(t(l),e.name,e)}),"string"==typeof l.options.method&&(l.options.method=l.options.method.toUpperCase()),(d=l.getExistingFallback())&&d.parentNode&&d.parentNode.removeChild(d),!1!==l.options.previewsContainer&&(l.options.previewsContainer?l.previewsContainer=o.getElement(l.options.previewsContainer,"previewsContainer"):l.previewsContainer=l.element),l.options.clickable&&(!0===l.options.clickable?l.clickableElements=[l.element]:l.clickableElements=o.getElements(l.options.clickable,"clickable")),l.init(),l}return l(o,n),r(o,[{key:"getAcceptedFiles",value:function(){return this.files.filter((function(e){return e.accepted})).map((function(e){return e}))}},{key:"getRejectedFiles",value:function(){return this.files.filter((function(e){return!e.accepted})).map((function(e){return e}))}},{key:"getFilesWithStatus",value:function(e){return this.files.filter((function(t){return t.status===e})).map((function(e){return e}))}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(o.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(o.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(o.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter((function(e){return e.status===o.UPLOADING||e.status===o.QUEUED})).map((function(e){return e}))}},{key:"init",value:function(){var e=this,t=this,i=this,n=this,r=this,a=this,l=this,s=this,u=this,c=this,d=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(o.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length){var h=this,p=function(){var e=h;h.hiddenFileInput&&h.hiddenFileInput.parentNode.removeChild(h.hiddenFileInput),h.hiddenFileInput=document.createElement("input"),h.hiddenFileInput.setAttribute("type","file"),(null===h.options.maxFiles||h.options.maxFiles>1)&&h.hiddenFileInput.setAttribute("multiple","multiple"),h.hiddenFileInput.className="dz-hidden-input",null!==h.options.acceptedFiles&&h.hiddenFileInput.setAttribute("accept",h.options.acceptedFiles),null!==h.options.capture&&h.hiddenFileInput.setAttribute("capture",h.options.capture),h.hiddenFileInput.setAttribute("tabindex","-1"),h.hiddenFileInput.style.visibility="hidden",h.hiddenFileInput.style.position="absolute",h.hiddenFileInput.style.top="0",h.hiddenFileInput.style.left="0",h.hiddenFileInput.style.height="0",h.hiddenFileInput.style.width="0",o.getElement(h.options.hiddenInputContainer,"hiddenInputContainer").appendChild(h.hiddenFileInput),h.hiddenFileInput.addEventListener("change",(function(){var t=e.hiddenFileInput.files,i=!0,n=!1,r=void 0;if(t.length)try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var l=a.value;e.addFile(l)}}catch(e){n=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw r}}e.emit("addedfiles",t),p()}))};p()}this.URL=null!==window.URL?window.URL:window.webkitURL;var f=!0,m=!1,v=void 0;try{for(var y,g=this.events[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var b=y.value;this.on(b,this.options[b])}}catch(e){m=!0,v=e}finally{try{f||null==g.return||g.return()}finally{if(m)throw v}}this.on("uploadprogress",(function(){return e.updateTotalUploadProgress()})),this.on("removedfile",(function(){return t.updateTotalUploadProgress()})),this.on("canceled",(function(e){return i.emit("complete",e)})),this.on("complete",(function(e){var t=n;if(0===n.getAddedFiles().length&&0===n.getUploadingFiles().length&&0===n.getQueuedFiles().length)return setTimeout((function(){return t.emit("queuecomplete")}),0)}));var k=function(e){if(function(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"===e.dataTransfer.types[t])return!0;return!1}(e))return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(e){return r.emit("dragstart",e)},dragenter:function(e){return k(e),a.emit("dragenter",e)},dragover:function(e){var t;try{t=e.dataTransfer.effectAllowed}catch(e){}return e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",k(e),l.emit("dragover",e)},dragleave:function(e){return s.emit("dragleave",e)},drop:function(e){return k(e),u.drop(e)},dragend:function(e){return c.emit("dragend",e)}}}],this.clickableElements.forEach((function(e){var t=d;return d.listeners.push({element:e,events:{click:function(i){return(e!==t.element||i.target===t.element||o.elementInside(i.target,t.element.querySelector(".dz-message")))&&t.hiddenFileInput.click(),!0}}})})),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,o.instances.splice(o.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e,t=0,i=0;if(this.getActiveFiles().length){var n=!0,r=!1,a=void 0;try{for(var o,l=this.getActiveFiles()[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value;t+=s.upload.bytesSent,i+=s.upload.total}}catch(e){r=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}e=100*t/i}else e=100;return this.emit("totaluploadprogress",e,i,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(e,"]"):"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e,t;if(e=this.getExistingFallback())return e;var i='<div class="dz-fallback">';this.options.dictFallbackText&&(i+="<p>".concat(this.options.dictFallbackText,"</p>")),i+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var n=o.createElement(i);return"FORM"!==this.element.tagName?(t=o.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(n):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:n}},{key:"getExistingFallback",value:function(){var e=function(e){var t=!0,i=!1,n=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(/(^| )fallback($| )/.test(o.className))return o}}catch(e){i=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}},t=!0,i=!1,n=void 0;try{for(var r,a=["div","form"][Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o,l=r.value;if(o=e(this.element.getElementsByTagName(l)))return o}}catch(e){i=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}}},{key:"setupEventListeners",value:function(){return this.listeners.map((function(e){return function(){var t=[];for(var i in e.events){var n=e.events[i];t.push(e.element.addEventListener(i,n,!1))}return t}()}))}},{key:"removeEventListeners",value:function(){return this.listeners.map((function(e){return function(){var t=[];for(var i in e.events){var n=e.events[i];t.push(e.element.removeEventListener(i,n,!1))}return t}()}))}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach((function(e){return e.classList.remove("dz-clickable")})),this.removeEventListeners(),this.disabled=!0,this.files.map((function(t){return e.cancelUpload(t)}))}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach((function(e){return e.classList.add("dz-clickable")})),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,i="b";if(e>0){for(var n=["tb","gb","mb","kb","b"],r=0;r<n.length;r++){var a=n[r];if(e>=Math.pow(this.options.filesizeBase,4-r)/10){t=e/Math.pow(this.options.filesizeBase,4-r),i=a;break}}t=Math.round(10*t)/10}return"<strong>".concat(t,"</strong> ").concat(this.options.dictFileSizeUnits[i])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],i=0;i<e.dataTransfer.files.length;i++)t[i]=e.dataTransfer.files[i];if(t.length){var n=e.dataTransfer.items;n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)}this.emit("addedfiles",t)}}},{key:"paste",value:function(e){if(null!=(i=function(e){return e.items},null!=(t=null!=e?e.clipboardData:void 0)?i(t):void 0)){var t,i;this.emit("paste",e);var n=e.clipboardData.items;return n.length?this._addFilesFromItems(n):void 0}}},{key:"handleFiles",value:function(e){var t=!0,i=!1,n=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.addFile(o)}}catch(e){i=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}}},{key:"_addFilesFromItems",value:function(e){var t=this;return function(){var i=[],n=!0,r=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s,u=o.value;null!=u.webkitGetAsEntry&&(s=u.webkitGetAsEntry())?s.isFile?i.push(t.addFile(u.getAsFile())):s.isDirectory?i.push(t._addFilesFromDirectory(s,s.name)):i.push(void 0):null==u.getAsFile||null!=u.kind&&"file"!==u.kind?i.push(void 0):i.push(t.addFile(u.getAsFile()))}}catch(e){r=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}return i}()}},{key:"_addFilesFromDirectory",value:function(e,t){var i=this,n=e.createReader(),r=function(e){return"log",n=function(t){return t.log(e)},null!=(t=console)&&"function"==typeof t.log?n(t):void 0;var t,n},a=function(){var e=i;return n.readEntries((function(i){if(i.length>0){var n=!0,r=!1,o=void 0;try{for(var l,s=i[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var u=l.value,c=e;u.isFile?u.file((function(e){if(!c.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath="".concat(t,"/").concat(e.name),c.addFile(e)})):u.isDirectory&&e._addFilesFromDirectory(u,"".concat(t,"/").concat(u.name))}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}a()}return null}),r)};return a()}},{key:"accept",value:function(e,t){this.options.maxFilesize&&e.size>1048576*this.options.maxFilesize?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):o.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var t=this;e.upload={uuid:o.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e)},this.files.push(e),e.status=o.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,(function(i){i?(e.accepted=!1,t._errorProcessing([e],i)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}))}},{key:"enqueueFiles",value:function(e){var t=!0,i=!1,n=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.enqueueFile(o)}}catch(e){i=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}return null}},{key:"enqueueFile",value:function(e){if(e.status!==o.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");var t=this;if(e.status=o.QUEUED,this.options.autoProcessQueue)return setTimeout((function(){return t.processQueue()}),0)}},{key:"_enqueueThumbnail",value:function(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1048576*this.options.maxThumbnailFilesize){var t=this;return this._thumbnailQueue.push(e),setTimeout((function(){return t._processThumbnailQueue()}),0)}}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,(function(i){return e.emit("thumbnail",t,i),e._processingThumbnail=!1,e._processThumbnailQueue()}))}}},{key:"removeFile",value:function(e){if(e.status===o.UPLOADING&&this.cancelUpload(e),this.files=m(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);var t=!0,i=!1,n=void 0;try{for(var r,a=this.files.slice()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var l=r.value;(l.status!==o.UPLOADING||e)&&this.removeFile(l)}}catch(e){i=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}return null}},{key:"resizeImage",value:function(e,t,i,n,r){var a=this;return this.createThumbnail(e,t,i,n,!0,(function(t,i){if(null==i)return r(e);var n=a.options.resizeMimeType;null==n&&(n=e.type);var l=i.toDataURL(n,a.options.resizeQuality);return"image/jpeg"!==n&&"image/jpg"!==n||(l=g.restore(e.dataURL,l)),r(o.dataURItoBlob(l))}))}},{key:"createThumbnail",value:function(e,t,i,n,r,a){var o=this,l=new FileReader;l.onload=function(){e.dataURL=l.result,"image/svg+xml"!==e.type?o.createThumbnailFromUrl(e,t,i,n,r,a):null!=a&&a(l.result)},l.readAsDataURL(e)}},{key:"displayExistingFile",value:function(e,t,i,n,r){var a=void 0===r||r;if(this.emit("addedfile",e),this.emit("complete",e),a){var o=this;e.dataURL=t,this.createThumbnailFromUrl(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,(function(t){o.emit("thumbnail",e,t),i&&i()}),n)}else this.emit("thumbnail",e,t),i&&i()}},{key:"createThumbnailFromUrl",value:function(e,t,i,n,r,a,o){var l=this,s=document.createElement("img");return o&&(s.crossOrigin=o),r="from-image"!=getComputedStyle(document.body).imageOrientation&&r,s.onload=function(){var o=l,u=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&r&&(u=function(e){return EXIF.getData(s,(function(){return e(EXIF.getTag(this,"Orientation"))}))}),u((function(r){e.width=s.width,e.height=s.height;var l=o.options.resize.call(o,e,t,i,n),u=document.createElement("canvas"),c=u.getContext("2d");switch(u.width=l.trgWidth,u.height=l.trgHeight,r>4&&(u.width=l.trgHeight,u.height=l.trgWidth),r){case 2:c.translate(u.width,0),c.scale(-1,1);break;case 3:c.translate(u.width,u.height),c.rotate(Math.PI);break;case 4:c.translate(0,u.height),c.scale(1,-1);break;case 5:c.rotate(.5*Math.PI),c.scale(1,-1);break;case 6:c.rotate(.5*Math.PI),c.translate(0,-u.width);break;case 7:c.rotate(.5*Math.PI),c.translate(u.height,-u.width),c.scale(-1,1);break;case 8:c.rotate(-.5*Math.PI),c.translate(-u.height,0)}y(c,s,null!=l.srcX?l.srcX:0,null!=l.srcY?l.srcY:0,l.srcWidth,l.srcHeight,null!=l.trgX?l.trgX:0,null!=l.trgY?l.trgY:0,l.trgWidth,l.trgHeight);var d=u.toDataURL("image/png");if(null!=a)return a(d,u)}))},null!=a&&(s.onerror=a),s.src=e.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,i=t;if(!(t>=e)){var n=this.getQueuedFiles();if(n.length>0){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-t));for(;i<e;){if(!n.length)return;this.processFile(n.shift()),i++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){var t=!0,i=!1,n=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var l=r.value;l.processing=!0,l.status=o.UPLOADING,this.emit("processing",l)}}catch(e){i=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter((function(t){return t.xhr===e})).map((function(e){return e}))}},{key:"cancelUpload",value:function(e){if(e.status===o.UPLOADING){var t=this._getFilesWithXhr(e.xhr),i=!0,n=!1,r=void 0;try{for(var a,l=t[Symbol.iterator]();!(i=(a=l.next()).done);i=!0)(p=a.value).status=o.CANCELED}catch(e){n=!0,r=e}finally{try{i||null==l.return||l.return()}finally{if(n)throw r}}void 0!==e.xhr&&e.xhr.abort();var s=!0,u=!1,c=void 0;try{for(var d,h=t[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var p=d.value;this.emit("canceled",p)}}catch(e){u=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else e.status!==o.ADDED&&e.status!==o.QUEUED||(e.status=o.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return"function"==typeof e?e.apply(this,i):e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(e){var t=this;this._transformFiles(e,(function(i){if(t.options.chunking){var n=i[0];e[0].upload.chunked=t.options.chunking&&(t.options.forceChunking||n.size>t.options.chunkSize),e[0].upload.totalChunkCount=Math.ceil(n.size/t.options.chunkSize)}if(e[0].upload.chunked){var r=t,a=t,l=e[0];n=i[0],l.upload.chunks=[];var s=function(){for(var t=0;void 0!==l.upload.chunks[t];)t++;if(!(t>=l.upload.totalChunkCount)){var i=t*r.options.chunkSize,a=Math.min(i+r.options.chunkSize,n.size),s={name:r._getParamName(0),data:n.webkitSlice?n.webkitSlice(i,a):n.slice(i,a),filename:l.upload.filename,chunkIndex:t};l.upload.chunks[t]={file:l,index:t,dataBlock:s,status:o.UPLOADING,progress:0,retries:0},r._uploadData(e,[s])}};if(l.upload.finishedChunkUpload=function(t,i){var n=a,r=!0;t.status=o.SUCCESS,t.dataBlock=null,t.response=t.xhr.responseText,t.responseHeaders=t.xhr.getAllResponseHeaders(),t.xhr=null;for(var u=0;u<l.upload.totalChunkCount;u++){if(void 0===l.upload.chunks[u])return s();l.upload.chunks[u].status!==o.SUCCESS&&(r=!1)}r&&a.options.chunksUploaded(l,(function(){n._finished(e,i,null)}))},t.options.parallelChunkUploads)for(var u=0;u<l.upload.totalChunkCount;u++)s();else s()}else{var c=[];for(u=0;u<e.length;u++)c[u]={name:t._getParamName(u),data:i[u],filename:e[u].upload.filename};t._uploadData(e,c)}}))}},{key:"_getChunk",value:function(e,t){for(var i=0;i<e.upload.totalChunkCount;i++)if(void 0!==e.upload.chunks[i]&&e.upload.chunks[i].xhr===t)return e.upload.chunks[i]}},{key:"_uploadData",value:function(t,i){var n=this,r=this,a=this,o=this,l=new XMLHttpRequest,s=!0,c=!1,d=void 0;try{for(var h=t[Symbol.iterator]();!(s=(x=h.next()).done);s=!0)(g=x.value).xhr=l}catch(e){c=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(c)throw d}}t[0].upload.chunked&&(t[0].upload.chunks[i[0].chunkIndex].xhr=l);var p=this.resolveOption(this.options.method,t,i),f=this.resolveOption(this.options.url,t,i);l.open(p,f,!0),this.resolveOption(this.options.timeout,t)&&(l.timeout=this.resolveOption(this.options.timeout,t)),l.withCredentials=!!this.options.withCredentials,l.onload=function(e){n._finishedUploading(t,l,e)},l.ontimeout=function(){r._handleUploadError(t,l,"Request timedout after ".concat(r.options.timeout/1e3," seconds"))},l.onerror=function(){a._handleUploadError(t,l)},(null!=l.upload?l.upload:l).onprogress=function(e){return o._updateFilesUploadProgress(t,l,e)};var m=this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{};for(var v in this.options.binaryBody&&(m["Content-Type"]=t[0].type),this.options.headers&&e(u)(m,this.options.headers),m){var y=m[v];y&&l.setRequestHeader(v,y)}if(this.options.binaryBody){s=!0,c=!1,d=void 0;try{for(h=t[Symbol.iterator]();!(s=(x=h.next()).done);s=!0){var g=x.value;this.emit("sending",g,l)}}catch(e){c=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(c)throw d}}this.options.uploadMultiple&&this.emit("sendingmultiple",t,l),this.submitRequest(l,null,t)}else{var b=new FormData;if(this.options.params){var k=this.options.params;for(var w in"function"==typeof k&&(k=k.call(this,t,l,t[0].upload.chunked?this._getChunk(t[0],l):null)),k){var F=k[w];if(Array.isArray(F))for(var E=0;E<F.length;E++)b.append(w,F[E]);else b.append(w,F)}}s=!0,c=!1,d=void 0;try{var x;for(h=t[Symbol.iterator]();!(s=(x=h.next()).done);s=!0)g=x.value,this.emit("sending",g,l,b)}catch(e){c=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(c)throw d}}for(this.options.uploadMultiple&&this.emit("sendingmultiple",t,l,b),this._addFormElementData(b),E=0;E<i.length;E++){var z=i[E];b.append(z.name,z.data,z.filename)}this.submitRequest(l,b,t)}}},{key:"_transformFiles",value:function(e,t){for(var i=this,n=function(n){i.options.transformFile.call(i,e[n],(function(i){r[n]=i,++a===e.length&&t(r)}))},r=[],a=0,o=0;o<e.length;o++)n(o)}},{key:"_addFormElementData",value:function(e){var t=!0,i=!1,n=void 0;if("FORM"===this.element.tagName)try{for(var r=this.element.querySelectorAll("input, textarea, select, button")[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var a=s.value,o=a.getAttribute("name"),l=a.getAttribute("type");if(l&&(l=l.toLowerCase()),null!=o)if("SELECT"===a.tagName&&a.hasAttribute("multiple")){t=!0,i=!1,n=void 0;try{var s;for(r=a.options[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var u=s.value;u.selected&&e.append(o,u.value)}}catch(e){i=!0,n=e}finally{try{t||null==r.return||r.return()}finally{if(i)throw n}}}else(!l||"checkbox"!==l&&"radio"!==l||a.checked)&&e.append(o,a.value)}}catch(e){i=!0,n=e}finally{try{t||null==r.return||r.return()}finally{if(i)throw n}}}},{key:"_updateFilesUploadProgress",value:function(e,t,i){var n=!0,r=!1,a=void 0;if(e[0].upload.chunked){c=e[0];var o=this._getChunk(c,t);i?(o.progress=100*i.loaded/i.total,o.total=i.total,o.bytesSent=i.loaded):(o.progress=100,o.bytesSent=o.total),c.upload.progress=0,c.upload.total=0,c.upload.bytesSent=0;for(var l=0;l<c.upload.totalChunkCount;l++)c.upload.chunks[l]&&void 0!==c.upload.chunks[l].progress&&(c.upload.progress+=c.upload.chunks[l].progress,c.upload.total+=c.upload.chunks[l].total,c.upload.bytesSent+=c.upload.chunks[l].bytesSent);c.upload.progress=c.upload.progress/c.upload.totalChunkCount,this.emit("uploadprogress",c,c.upload.progress,c.upload.bytesSent)}else try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c;(c=s.value).upload.total&&c.upload.bytesSent&&c.upload.bytesSent==c.upload.total||(i?(c.upload.progress=100*i.loaded/i.total,c.upload.total=i.total,c.upload.bytesSent=i.loaded):(c.upload.progress=100,c.upload.bytesSent=c.upload.total),this.emit("uploadprogress",c,c.upload.progress,c.upload.bytesSent))}}catch(e){r=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw a}}}},{key:"_finishedUploading",value:function(e,t,i){var n;if(e[0].status!==o.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(n=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{n=JSON.parse(n)}catch(e){i=e,n="Invalid JSON response from server."}this._updateFilesUploadProgress(e,t),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t),n):this._finished(e,n,i):this._handleUploadError(e,t,n)}}},{key:"_handleUploadError",value:function(e,t,i){if(e[0].status!==o.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var n=this._getChunk(e[0],t);if(n.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[n.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(e,i||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}},{key:"submitRequest",value:function(e,t,i){if(1==e.readyState)if(this.options.binaryBody)if(i[0].upload.chunked){var n=this._getChunk(i[0],e);e.send(n.dataBlock.data)}else e.send(i[0]);else e.send(t);else console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(e,t,i){var n=!0,r=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var u=l.value;u.status=o.SUCCESS,this.emit("success",u,t,i),this.emit("complete",u)}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,t,i){var n=!0,r=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var u=l.value;u.status=o.ERROR,this.emit("error",u,t,i),this.emit("complete",u)}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=h,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}}]),o}(h);f.initClass(),f.options={},f.optionsForElement=function(e){return e.getAttribute("id")?f.options[v(e.getAttribute("id"))]:void 0},f.instances=[],f.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},f.discover=function(){var e;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function(t){return function(){var i=[],n=!0,r=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value;/(^| )dropzone($| )/.test(s.className)?i.push(e.push(s)):i.push(void 0)}}catch(e){r=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}return i}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){var t=[],i=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var l=a.value;!1!==f.optionsForElement(l)?t.push(new f(l)):t.push(void 0)}}catch(e){n=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw r}}return t}()},f.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],f.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==f.blacklistedBrowsers&&(f.blockedBrowsers=f.blacklistedBrowsers);var t=!0,i=!1,n=void 0;try{for(var r,a=f.blockedBrowsers[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)r.value.test(navigator.userAgent)&&(e=!1)}catch(e){i=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}}else e=!1;else e=!1;return e},f.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),r=new Uint8Array(n),a=0,o=t.length,l=0<=o;l?a<=o:a>=o;l?a++:a--)r[a]=t.charCodeAt(a);return new Blob([n],{type:i})};var m=function(e,t){return e.filter((function(e){return e!==t})).map((function(e){return e}))},v=function(e){return e.replace(/[\-_](\w)/g,(function(e){return e.charAt(1).toUpperCase()}))};f.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},f.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},f.getElement=function(e,t){var i;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType&&(i=e),null==i)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector or a plain HTML element."));return i},f.getElements=function(e,t){var i,n;if(e instanceof Array){n=[];try{var r=!0,a=!1,o=void 0;try{for(var l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)i=s.value,n.push(this.getElement(i,t))}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}catch(e){n=null}}else if("string"==typeof e){n=[],r=!0,a=!1,o=void 0;try{var s;for(l=document.querySelectorAll(e)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)i=s.value,n.push(i)}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}else null!=e.nodeType&&(n=[e]);if(null==n||!n.length)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return n},f.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},f.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");var i=e.type,n=i.replace(/\/.*$/,""),r=!0,a=!1,o=void 0;try{for(var l,s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;if("."===(u=u.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(u.toLowerCase(),e.name.length-u.length))return!0}else if(/\/\*$/.test(u)){if(n===u.replace(/\/.*$/,""))return!0}else if(i===u)return!0}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each((function(){return new f(this,e)}))}),f.ADDED="added",f.QUEUED="queued",f.ACCEPTED=f.QUEUED,f.UPLOADING="uploading",f.PROCESSING=f.UPLOADING,f.CANCELED="canceled",f.ERROR="error",f.SUCCESS="success";var y=function(e,t,i,n,r,a,o,l,s,u){var c=function(e){e.naturalWidth;var t=e.naturalHeight,i=document.createElement("canvas");i.width=1,i.height=t;var n=i.getContext("2d");n.drawImage(e,0,0);for(var r=n.getImageData(1,0,1,t).data,a=0,o=t,l=t;l>a;)0===r[4*(l-1)+3]?o=l:a=l,l=o+a>>1;var s=l/t;return 0===s?1:s}(t);return e.drawImage(t,i,n,r,a,o,l,s,u/c)},g=function(){"use strict";function e(){i(this,e)}return r(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",i=void 0,n=void 0,r="",a=void 0,o=void 0,l=void 0,s="",u=0;a=(i=e[u++])>>2,o=(3&i)<<4|(n=e[u++])>>4,l=(15&n)<<2|(r=e[u++])>>6,s=63&r,isNaN(n)?l=s=64:isNaN(r)&&(s=64),t=t+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l)+this.KEY_STR.charAt(s),i=n=r="",a=o=l=s="",u<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var i=this.decode64(e.replace("data:image/jpeg;base64,","")),n=this.slice2Segments(i),r=this.exifManipulation(t,n);return"data:image/jpeg;base64,".concat(this.encode64(r))}},{key:"exifManipulation",value:function(e,t){var i=this.getExifArray(t),n=this.insertExif(e,i);return new Uint8Array(n)}},{key:"getExifArray",value:function(e){for(var t=void 0,i=0;i<e.length;){if(255===(t=e[i])[0]&225===t[1])return t;i++}return[]}},{key:"insertExif",value:function(e,t){var i=e.replace("data:image/jpeg;base64,",""),n=this.decode64(i),r=n.indexOf(255,3),a=n.slice(0,r),o=n.slice(r),l=a;return(l=l.concat(t)).concat(o)}},{key:"slice2Segments",value:function(e){for(var t=0,i=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var n=t+(256*e[t+2]+e[t+3])+2,r=e.slice(t,n);i.push(r),t=n}if(t>e.length)break}return i}},{key:"decode64",value:function(e){var t=void 0,i=void 0,n="",r=void 0,a=void 0,o="",l=0,s=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(l++))<<2|(r=this.KEY_STR.indexOf(e.charAt(l++)))>>4,i=(15&r)<<4|(a=this.KEY_STR.indexOf(e.charAt(l++)))>>2,n=(3&a)<<6|(o=this.KEY_STR.indexOf(e.charAt(l++))),s.push(t),64!==a&&s.push(i),64!==o&&s.push(n),t=i=n="",r=a=o="",l<e.length;);return s}}]),e}();g.initClass(),window.Dropzone=f}(),function($){$.Jcrop=function(obj,opt){var docOffset,options=$.extend({},$.Jcrop.defaults),_ua=navigator.userAgent.toLowerCase(),is_msie=/msie/.test(_ua),ie6mode=/msie [1-6]\./.test(_ua);function px(n){return Math.round(n)+"px"}function cssClass(cl){return options.baseClass+"-"+cl}function getPos(obj){var pos=$(obj).offset();return[pos.left,pos.top]}function mouseAbs(e){return[e.pageX-docOffset[0],e.pageY-docOffset[1]]}function setOptions(opt){"object"!=typeof opt&&(opt={}),options=$.extend(options,opt),$.each(["onChange","onSelect","onRelease","onDblClick"],(function(i,e){"function"!=typeof options[e]&&(options[e]=function(){})}))}function startDragMode(mode,pos,touch){if(docOffset=getPos($img),Tracker.setCursor("move"===mode?mode:mode+"-resize"),"move"===mode)return Tracker.activateHandlers(function(pos){var lloc=pos;return KeyManager.watchKeys(),function(pos){Coords.moveOffset([pos[0]-lloc[0],pos[1]-lloc[1]]),lloc=pos,Selection.update()}}(pos),doneSelect,touch);var fc=Coords.getFixed(),opp=oppLockCorner(mode),opc=Coords.getCorner(oppLockCorner(opp));Coords.setPressed(Coords.getCorner(opp)),Coords.setCurrent(opc),Tracker.activateHandlers(function(mode,f){return function(pos){if(options.aspectRatio)switch(mode){case"e":case"w":pos[1]=f.y+1;break;case"n":case"s":pos[0]=f.x+1}else switch(mode){case"e":case"w":pos[1]=f.y2;break;case"n":case"s":pos[0]=f.x2}Coords.setCurrent(pos),Selection.update()}}(mode,fc),doneSelect,touch)}function oppLockCorner(ord){switch(ord){case"n":case"ne":return"sw";case"s":case"e":case"se":return"nw";case"w":case"sw":return"ne";case"nw":return"se"}}function createDragger(ord){return function(e){return!options.disabled&&(!("move"===ord&&!options.allowMove)&&(docOffset=getPos($img),btndown=!0,startDragMode(ord,mouseAbs(e)),e.stopPropagation(),e.preventDefault(),!1))}}function presize($obj,w,h){var nw=$obj.width(),nh=$obj.height();nw>w&&w>0&&(nw=w,nh=w/$obj.width()*$obj.height()),nh>h&&h>0&&(nh=h,nw=h/$obj.height()*$obj.width()),xscale=$obj.width()/nw,yscale=$obj.height()/nh,$obj.width(nw).height(nh)}function unscale(c){return{x:c.x*xscale,y:c.y*yscale,x2:c.x2*xscale,y2:c.y2*yscale,w:c.w*xscale,h:c.h*yscale}}function doneSelect(pos){var c=Coords.getFixed();c.w>options.minSelect[0]&&c.h>options.minSelect[1]?(Selection.enableHandles(),Selection.done()):Selection.release(),Tracker.setCursor(options.allowSelect?"crosshair":"default")}function newSelection(e){if(options.disabled)return!1;if(!options.allowSelect)return!1;btndown=!0,docOffset=getPos($img),Selection.disableHandles(),Tracker.setCursor("crosshair");var pos=mouseAbs(e);return Coords.setPressed(pos),Selection.update(),Tracker.activateHandlers(selectDrag,doneSelect,"touch"===e.type.substring(0,5)),KeyManager.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function selectDrag(pos){Coords.setCurrent(pos),Selection.update()}function newTracker(){var trk=$("<div></div>").addClass(cssClass("tracker"));return is_msie&&trk.css({opacity:0,backgroundColor:"white"}),trk}"object"!=typeof obj&&(obj=$(obj)[0]),"object"!=typeof opt&&(opt={}),setOptions(opt);var img_css={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},$origimg=$(obj),img_mode=!0;if("IMG"==obj.tagName){if(0!=$origimg[0].width&&0!=$origimg[0].height)$origimg.width($origimg[0].width),$origimg.height($origimg[0].height);else{var tempImage=new Image;tempImage.src=$origimg[0].src,$origimg.width(tempImage.width),$origimg.height(tempImage.height)}var $img=$origimg.clone().removeAttr("id").css(img_css).show();$img.width($origimg.width()),$img.height($origimg.height()),$origimg.after($img).hide()}else $img=$origimg.css(img_css).show(),img_mode=!1,null===options.shade&&(options.shade=!0);presize($img,options.boxWidth,options.boxHeight);var boundx=$img.width(),boundy=$img.height(),$div=$("<div />").width(boundx).height(boundy).addClass(cssClass("holder")).css({position:"relative",backgroundColor:options.bgColor}).insertAfter($origimg).append($img);options.addClass&&$div.addClass(options.addClass);var $img2=$("<div />"),$img_holder=$("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),$hdl_holder=$("<div />").width("100%").height("100%").css("zIndex",320),$sel=$("<div />").css({position:"absolute",zIndex:600}).dblclick((function(){var c=Coords.getFixed();options.onDblClick.call(api,c)})).insertBefore($img).append($img_holder,$hdl_holder);img_mode&&($img2=$("<img />").attr("src",$img.attr("src")).css(img_css).width(boundx).height(boundy),$img_holder.append($img2)),ie6mode&&$sel.css({overflowY:"hidden"});var xlimit,ylimit,xmin,ymin,xscale,yscale,btndown,animating,bound=options.boundary,$trk=newTracker().width(boundx+2*bound).height(boundy+2*bound).css({position:"absolute",top:px(-bound),left:px(-bound),zIndex:290}).mousedown(newSelection),bgcolor=options.bgColor,bgopacity=options.bgOpacity;docOffset=getPos($img);var Touch=function(){function hasTouchSupport(){var i,support={},events=["touchstart","touchmove","touchend"],el=document.createElement("div");try{for(i=0;i<events.length;i++){var eventName=events[i],isSupported=(eventName="on"+eventName)in el;isSupported||(el.setAttribute(eventName,"return;"),isSupported="function"==typeof el[eventName]),support[events[i]]=isSupported}return support.touchstart&&support.touchend&&support.touchmove}catch(err){return!1}}return{createDragger:function(ord){return function(e){return!options.disabled&&(!("move"===ord&&!options.allowMove)&&(docOffset=getPos($img),btndown=!0,startDragMode(ord,mouseAbs(Touch.cfilter(e)),!0),e.stopPropagation(),e.preventDefault(),!1))}},newSelection:function(e){return newSelection(Touch.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},fixTouchSupport:function(e){$(e.currentTarget).hasClass("jcrop-tracker")&&e.stopPropagation()},isSupported:hasTouchSupport,support:!0===options.touchSupport||!1===options.touchSupport?options.touchSupport:hasTouchSupport()}}(),Coords=function(){var ox,oy,x1=0,y1=0,x2=0,y2=0;function getFixed(){if(!options.aspectRatio)return function(){var delta,xsize=x2-x1,ysize=y2-y1;xlimit&&Math.abs(xsize)>xlimit&&(x2=xsize>0?x1+xlimit:x1-xlimit);ylimit&&Math.abs(ysize)>ylimit&&(y2=ysize>0?y1+ylimit:y1-ylimit);ymin/yscale&&Math.abs(ysize)<ymin/yscale&&(y2=ysize>0?y1+ymin/yscale:y1-ymin/yscale);xmin/xscale&&Math.abs(xsize)<xmin/xscale&&(x2=xsize>0?x1+xmin/xscale:x1-xmin/xscale);x1<0&&(x2-=x1,x1-=x1);y1<0&&(y2-=y1,y1-=y1);x2<0&&(x1-=x2,x2-=x2);y2<0&&(y1-=y2,y2-=y2);x2>boundx&&(x1-=delta=x2-boundx,x2-=delta);y2>boundy&&(y1-=delta=y2-boundy,y2-=delta);x1>boundx&&(y2-=delta=x1-boundy,y1-=delta);y1>boundy&&(y2-=delta=y1-boundy,y1-=delta);return makeObj(flipCoords(x1,y1,x2,y2))}();var xx,yy,w,h,aspect=options.aspectRatio,min_x=options.minSize[0]/xscale,max_x=options.maxSize[0]/xscale,max_y=options.maxSize[1]/yscale,rw=x2-x1,rh=y2-y1,rwa=Math.abs(rw),rha=Math.abs(rh);return 0===max_x&&(max_x=10*boundx),0===max_y&&(max_y=10*boundy),rwa/rha<aspect?(yy=y2,w=rha*aspect,(xx=rw<0?x1-w:w+x1)<0?(xx=0,h=Math.abs((xx-x1)/aspect),yy=rh<0?y1-h:h+y1):xx>boundx&&(xx=boundx,h=Math.abs((xx-x1)/aspect),yy=rh<0?y1-h:h+y1)):(xx=x2,h=rwa/aspect,(yy=rh<0?y1-h:y1+h)<0?(yy=0,w=Math.abs((yy-y1)*aspect),xx=rw<0?x1-w:w+x1):yy>boundy&&(yy=boundy,w=Math.abs(yy-y1)*aspect,xx=rw<0?x1-w:w+x1)),xx>x1?(xx-x1<min_x?xx=x1+min_x:xx-x1>max_x&&(xx=x1+max_x),yy=yy>y1?y1+(xx-x1)/aspect:y1-(xx-x1)/aspect):xx<x1&&(x1-xx<min_x?xx=x1-min_x:x1-xx>max_x&&(xx=x1-max_x),yy=yy>y1?y1+(x1-xx)/aspect:y1-(x1-xx)/aspect),xx<0?(x1-=xx,xx=0):xx>boundx&&(x1-=xx-boundx,xx=boundx),yy<0?(y1-=yy,yy=0):yy>boundy&&(y1-=yy-boundy,yy=boundy),makeObj(flipCoords(x1,y1,xx,yy))}function rebound(p){return p[0]<0&&(p[0]=0),p[1]<0&&(p[1]=0),p[0]>boundx&&(p[0]=boundx),p[1]>boundy&&(p[1]=boundy),[Math.round(p[0]),Math.round(p[1])]}function flipCoords(x1,y1,x2,y2){var xa=x1,xb=x2,ya=y1,yb=y2;return x2<x1&&(xa=x2,xb=x1),y2<y1&&(ya=y2,yb=y1),[xa,ya,xb,yb]}function makeObj(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}return{flipCoords:flipCoords,setPressed:function(pos){pos=rebound(pos),x2=x1=pos[0],y2=y1=pos[1]},setCurrent:function(pos){pos=rebound(pos),ox=pos[0]-x2,oy=pos[1]-y2,x2=pos[0],y2=pos[1]},getOffset:function(){return[ox,oy]},moveOffset:function(offset){var ox=offset[0],oy=offset[1];0>x1+ox&&(ox-=ox+x1),0>y1+oy&&(oy-=oy+y1),boundy<y2+oy&&(oy+=boundy-(y2+oy)),boundx<x2+ox&&(ox+=boundx-(x2+ox)),x1+=ox,x2+=ox,y1+=oy,y2+=oy},getCorner:function(ord){var c=getFixed();switch(ord){case"ne":return[c.x2,c.y];case"nw":return[c.x,c.y];case"se":return[c.x2,c.y2];case"sw":return[c.x,c.y2]}},getFixed:getFixed}}(),Shade=function(){var enabled=!1,holder=$("<div />").css({position:"absolute",zIndex:240,opacity:0}),shades={top:createShade(),left:createShade().height(boundy),right:createShade().height(boundy),bottom:createShade()};function updateAuto(){return updateShade(Coords.getFixed())}function updateShade(c){shades.top.css({left:px(c.x),width:px(c.w),height:px(c.y)}),shades.bottom.css({top:px(c.y2),left:px(c.x),width:px(c.w),height:px(boundy-c.y2)}),shades.right.css({left:px(c.x2),width:px(boundx-c.x2)}),shades.left.css({width:px(c.x)})}function createShade(){return $("<div />").css({position:"absolute",backgroundColor:options.shadeColor||options.bgColor}).appendTo(holder)}function enableShade(){enabled||(enabled=!0,holder.insertBefore($img),updateAuto(),Selection.setBgOpacity(1,0,1),$img2.hide(),setBgColor(options.shadeColor||options.bgColor,1),Selection.isAwake()?setOpacity(options.bgOpacity,1):setOpacity(1,1))}function setBgColor(color,now){colorChangeMacro(getShades(),color,now)}function disableShade(){enabled&&(holder.remove(),$img2.show(),enabled=!1,Selection.isAwake()?Selection.setBgOpacity(options.bgOpacity,1,1):(Selection.setBgOpacity(1,1,1),Selection.disableHandles()),colorChangeMacro($div,0,1))}function setOpacity(opacity,now){enabled&&(options.bgFade&&!now?holder.animate({opacity:1-opacity},{queue:!1,duration:options.fadeTime}):holder.css({opacity:1-opacity}))}function getShades(){return holder.children()}return{update:updateAuto,updateRaw:updateShade,getShades:getShades,setBgColor:setBgColor,enable:enableShade,disable:disableShade,resize:function(w,h){shades.left.css({height:px(h)}),shades.right.css({height:px(h)})},refresh:function(){options.shade?enableShade():disableShade(),Selection.isAwake()&&setOpacity(options.bgOpacity)},opacity:setOpacity}}(),Selection=function(){var awake,hdep=370,borders={},handle={},dragbar={},seehandles=!1;function dragDiv(ord,zi){var jq=$("<div />").mousedown(createDragger(ord)).css({cursor:ord+"-resize",position:"absolute",zIndex:zi}).addClass("ord-"+ord);return Touch.support&&jq.bind("touchstart.jcrop",Touch.createDragger(ord)),$hdl_holder.append(jq),jq}function refresh(){var c=Coords.getFixed();Coords.setPressed([c.x,c.y]),Coords.setCurrent([c.x2,c.y2]),updateVisible()}function updateVisible(select){if(awake)return update(select)}function update(select){var w,h,x,y,c=Coords.getFixed();w=c.w,h=c.h,$sel.width(Math.round(w)).height(Math.round(h)),x=c.x,y=c.y,options.shade||$img2.css({top:px(-y),left:px(-x)}),$sel.css({top:px(y),left:px(x)}),options.shade&&Shade.updateRaw(c),awake||function(){$sel.show(),options.shade?Shade.opacity(bgopacity):setBgOpacity(bgopacity,!0);awake=!0}(),select?options.onSelect.call(api,unscale(c)):options.onChange.call(api,unscale(c))}function setBgOpacity(opacity,force,now){(awake||force)&&(options.bgFade&&!now?$img.animate({opacity:opacity},{queue:!1,duration:options.fadeTime}):$img.css("opacity",opacity))}function enableHandles(){if(seehandles=!0,options.allowResize)return $hdl_holder.show(),!0}function disableHandles(){seehandles=!1,$hdl_holder.hide()}function animMode(v){v?(animating=!0,disableHandles()):(animating=!1,enableHandles())}options.dragEdges&&$.isArray(options.createDragbars)&&function(li){var i;for(i=0;i<li.length;i++)dragbar[li[i]]=dragDiv(li[i],hdep++).addClass("jcrop-dragbar")}(options.createDragbars),$.isArray(options.createHandles)&&function(li){var i,ord,hs,div;for(i=0;i<li.length;i++)handle[li[i]]=(ord=li[i],hs=void 0,div=void 0,hs=options.handleSize,div=dragDiv(ord,hdep++).css({opacity:options.handleOpacity}).addClass(cssClass("handle")),hs&&div.width(hs).height(hs),div)}(options.createHandles),options.drawBorders&&$.isArray(options.createBorders)&&function(li){var cl,i,type,jq;for(i=0;i<li.length;i++){switch(li[i]){case"n":cl="hline";break;case"s":cl="hline bottom";break;case"e":cl="vline right";break;case"w":cl="vline"}borders[li[i]]=(type=cl,jq=void 0,jq=$("<div />").css({position:"absolute",opacity:options.borderOpacity}).addClass(cssClass(type)),$img_holder.append(jq),jq)}}(options.createBorders),$(document).bind("touchstart.jcrop-ios",Touch.fixTouchSupport);var $track=newTracker().mousedown(createDragger("move")).css({cursor:"move",position:"absolute",zIndex:360});return Touch.support&&$track.bind("touchstart.jcrop",Touch.createDragger("move")),$img_holder.append($track),disableHandles(),{updateVisible:updateVisible,update:update,release:function(){disableHandles(),$sel.hide(),options.shade?Shade.opacity(1):setBgOpacity(1),awake=!1,options.onRelease.call(api)},refresh:refresh,isAwake:function(){return awake},setCursor:function(cursor){$track.css("cursor",cursor)},enableHandles:enableHandles,enableOnly:function(){seehandles=!0},showHandles:function(){seehandles&&$hdl_holder.show()},disableHandles:disableHandles,animMode:animMode,setBgOpacity:setBgOpacity,done:function(){animMode(!1),refresh()}}}(),Tracker=function(){var onMove=function(){},onDone=function(){},trackDoc=options.trackDocument;function trackMove(e){return onMove(mouseAbs(e)),!1}function trackUp(e){return e.preventDefault(),e.stopPropagation(),btndown&&(btndown=!1,onDone(mouseAbs(e)),Selection.isAwake()&&options.onSelect.call(api,unscale(Coords.getFixed())),$trk.css({zIndex:290}),$(document).unbind(".jcrop"),onMove=function(){},onDone=function(){}),!1}function trackTouchMove(e){return onMove(mouseAbs(Touch.cfilter(e))),!1}function trackTouchEnd(e){return trackUp(Touch.cfilter(e))}return trackDoc||$trk.mousemove(trackMove).mouseup(trackUp).mouseout(trackUp),$img.before($trk),{activateHandlers:function(move,done,touch){return btndown=!0,onMove=move,onDone=done,function(touch){$trk.css({zIndex:450}),touch?$(document).bind("touchmove.jcrop",trackTouchMove).bind("touchend.jcrop",trackTouchEnd):trackDoc&&$(document).bind("mousemove.jcrop",trackMove).bind("mouseup.jcrop",trackUp)}(touch),!1},setCursor:function(t){$trk.css("cursor",t)}}}(),KeyManager=function(){var $keymgr=$('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),$keywrap=$("<div />").css({position:"absolute",overflow:"hidden"}).append($keymgr);function doNudge(e,x,y){options.allowMove&&(Coords.moveOffset([x,y]),Selection.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}return options.keySupport&&($keymgr.keydown((function(e){if(e.ctrlKey||e.metaKey)return!0;var nudge=!!e.shiftKey?10:1;switch(e.keyCode){case 37:doNudge(e,-nudge,0);break;case 39:doNudge(e,nudge,0);break;case 38:doNudge(e,0,-nudge);break;case 40:doNudge(e,0,nudge);break;case 27:options.allowSelect&&Selection.release();break;case 9:return!0}return!1})).blur((function(e){$keymgr.hide()})),ie6mode||!options.fixedSupport?($keymgr.css({position:"absolute",left:"-20px"}),$keywrap.append($keymgr).insertBefore($img)):$keymgr.insertBefore($img)),{watchKeys:function(){options.keySupport&&($keymgr.show(),$keymgr.focus())}}}();function setSelect(rect){setSelectRaw([rect[0]/xscale,rect[1]/yscale,rect[2]/xscale,rect[3]/yscale]),options.onSelect.call(api,unscale(Coords.getFixed())),Selection.enableHandles()}function setSelectRaw(l){Coords.setPressed([l[0],l[1]]),Coords.setCurrent([l[2],l[3]]),Selection.update()}function disableCrop(){options.disabled=!0,Selection.disableHandles(),Selection.setCursor("default"),Tracker.setCursor("default")}function enableCrop(){options.disabled=!1,interfaceUpdate()}function colorChangeMacro($obj,color,now){var mycolor=color||options.bgColor;options.bgFade&&$.fx.step.hasOwnProperty("backgroundColor")&&options.fadeTime&&!now?$obj.animate({backgroundColor:mycolor},{queue:!1,duration:options.fadeTime}):$obj.css("backgroundColor",mycolor)}function interfaceUpdate(alt){options.allowResize?alt?Selection.enableOnly():Selection.enableHandles():Selection.disableHandles(),Tracker.setCursor(options.allowSelect?"crosshair":"default"),Selection.setCursor(options.allowMove?"move":"default"),options.hasOwnProperty("trueSize")&&(xscale=options.trueSize[0]/boundx,yscale=options.trueSize[1]/boundy),options.hasOwnProperty("setSelect")&&(setSelect(options.setSelect),Selection.done(),delete options.setSelect),Shade.refresh(),options.bgColor!=bgcolor&&(colorChangeMacro(options.shade?Shade.getShades():$div,options.shade&&options.shadeColor||options.bgColor),bgcolor=options.bgColor),bgopacity!=options.bgOpacity&&(bgopacity=options.bgOpacity,options.shade?Shade.refresh():Selection.setBgOpacity(bgopacity)),xlimit=options.maxSize[0]||0,ylimit=options.maxSize[1]||0,xmin=options.minSize[0]||0,ymin=options.minSize[1]||0,options.hasOwnProperty("outerImage")&&($img.attr("src",options.outerImage),delete options.outerImage),Selection.refresh()}Touch.support&&$trk.bind("touchstart.jcrop",Touch.newSelection),$hdl_holder.hide(),interfaceUpdate(!0);var api={setImage:function(src,callback){Selection.release(),disableCrop();var img=new Image;img.onload=function(){var iw=img.width,ih=img.height,bw=options.boxWidth,bh=options.boxHeight;$img.width(iw).height(ih),$img.attr("src",src),$img2.attr("src",src),presize($img,bw,bh),boundx=$img.width(),boundy=$img.height(),$img2.width(boundx).height(boundy),$trk.width(boundx+2*bound).height(boundy+2*bound),$div.width(boundx).height(boundy),Shade.resize(boundx,boundy),enableCrop(),"function"==typeof callback&&callback.call(api)},img.src=src},animateTo:function(a,callback){var x1=a[0]/xscale,y1=a[1]/yscale,x2=a[2]/xscale,y2=a[3]/yscale;if(!animating){var animto=Coords.flipCoords(x1,y1,x2,y2),c=Coords.getFixed(),initcr=[c.x,c.y,c.x2,c.y2],animat=initcr,interv=options.animationDelay,ix1=animto[0]-initcr[0],iy1=animto[1]-initcr[1],ix2=animto[2]-initcr[2],iy2=animto[3]-initcr[3],pcent=0,velocity=options.swingSpeed;x1=animat[0],y1=animat[1],x2=animat[2],y2=animat[3],Selection.animMode(!0);var animator=function(){pcent+=(100-pcent)/velocity,animat[0]=Math.round(x1+pcent/100*ix1),animat[1]=Math.round(y1+pcent/100*iy1),animat[2]=Math.round(x2+pcent/100*ix2),animat[3]=Math.round(y2+pcent/100*iy2),pcent>=99.8&&(pcent=100),pcent<100?(setSelectRaw(animat),queueAnimator()):(Selection.done(),Selection.animMode(!1),"function"==typeof callback&&callback.call(api))};queueAnimator()}function queueAnimator(){window.setTimeout(animator,interv)}},setSelect:setSelect,setOptions:function(opt){setOptions(opt),interfaceUpdate()},tellSelect:function(){return unscale(Coords.getFixed())},tellScaled:function(){return Coords.getFixed()},setClass:function(cname){$div.removeClass().addClass(cssClass("holder")).addClass(cname)},disable:disableCrop,enable:enableCrop,cancel:function(){Selection.done(),Tracker.activateHandlers(null,null)},release:Selection.release,destroy:function(){$(document).unbind("touchstart.jcrop-ios",Touch.fixTouchSupport),$div.remove(),$origimg.show(),$origimg.css("visibility","visible"),$(obj).removeData("Jcrop")},focus:KeyManager.watchKeys,getBounds:function(){return[boundx*xscale,boundy*yscale]},getWidgetSize:function(){return[boundx,boundy]},getScaleFactor:function(){return[xscale,yscale]},getOptions:function(){return options},ui:{holder:$div,selection:$sel}};return is_msie&&$div.bind("selectstart",(function(){return!1})),$origimg.data("Jcrop",api),api},$.fn.Jcrop=function(options,callback){var api;return this.each((function(){if($(this).data("Jcrop")){if("api"===options)return $(this).data("Jcrop");$(this).data("Jcrop").setOptions(options)}else"IMG"==this.tagName?$.Jcrop.Loader(this,(function(){$(this).css({display:"block",visibility:"hidden"}),api=$.Jcrop(this,options),$.isFunction(callback)&&callback.call(api)})):($(this).css({display:"block",visibility:"hidden"}),api=$.Jcrop(this,options),$.isFunction(callback)&&callback.call(api))})),this},$.Jcrop.Loader=function(imgobj,success,error){var $img=$(imgobj),img=$img[0];$img.bind("load.jcloader",(function completeCheck(){img.complete?($img.unbind(".jcloader"),$.isFunction(success)&&success.call(img)):window.setTimeout(completeCheck,50)})).bind("error.jcloader",(function(e){$img.unbind(".jcloader"),$.isFunction(error)&&error.call(img)})),img.complete&&$.isFunction(success)&&($img.unbind(".jcloader"),success.call(img))},$.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Sortable=e()}(this,(function(){"use strict";function e(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)),o}function M(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e(Object(i),!0).forEach((function(t){var e,n;e=o,t=i[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))}))}return o}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,o=arguments[e];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function i(t,e){if(null==t)return{};var n,o=function(t,e){if(null==t)return{};for(var n,o={},i=Object.keys(t),r=0;r<i.length;r++)n=i[r],0<=e.indexOf(n)||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),r=0;r<i.length;r++)n=i[r],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n]);return o}function r(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function t(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var y=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),w=t(/Edge/i),s=t(/firefox/i),u=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),n=t(/iP(ad|od|hone)/i),c=t(/chrome/i)&&t(/android/i),d={capture:!1,passive:!1};function h(t,e,n){t.addEventListener(e,n,!y&&d)}function f(t,e,n){t.removeEventListener(e,n,!y&&d)}function p(t,e){if(e&&(">"===e[0]&&(e=e.substring(1)),t))try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return}}function N(t,e,n,o){if(t){n=n||document;do{if(null!=e&&(">"!==e[0]||t.parentNode===n)&&p(t,e)||o&&t===n)return t}while(t!==n&&(t=(i=t).host&&i!==document&&i.host.nodeType?i.host:i.parentNode))}var i;return null}var g,m=/\s+/g;function I(t,e,n){var o;t&&e&&(t.classList?t.classList[n?"add":"remove"](e):(o=(" "+t.className+" ").replace(m," ").replace(" "+e+" "," "),t.className=(o+(n?" "+e:"")).replace(m," ")))}function P(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];o[e=e in o||-1!==e.indexOf("webkit")?e:"-webkit-"+e]=n+("string"==typeof n?"":"px")}}function v(t,e){var n="";if("string"==typeof t)n=t;else do{var o=P(t,"transform")}while(o&&"none"!==o&&(n=o+" "+n),!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function b(t,e,n){if(t){var o=t.getElementsByTagName(e),i=0,r=o.length;if(n)for(;i<r;i++)n(o[i],i);return o}return[]}function O(){return document.scrollingElement||document.documentElement}function k(t,e,n,o,i){if(t.getBoundingClientRect||t===window){var r,a,l,s,c,u,d=t!==window&&t.parentNode&&t!==O()?(a=(r=t.getBoundingClientRect()).top,l=r.left,s=r.bottom,c=r.right,u=r.height,r.width):(l=a=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,window.innerWidth);if((e||n)&&t!==window&&(i=i||t.parentNode,!y))do{if(i&&i.getBoundingClientRect&&("none"!==P(i,"transform")||n&&"static"!==P(i,"position"))){var h=i.getBoundingClientRect();a-=h.top+parseInt(P(i,"border-top-width")),l-=h.left+parseInt(P(i,"border-left-width")),s=a+r.height,c=l+r.width;break}}while(i=i.parentNode);return o&&t!==window&&(o=(e=v(i||t))&&e.a,t=e&&e.d,e&&(s=(a/=t)+(u/=t),c=(l/=o)+(d/=o))),{top:a,left:l,bottom:s,right:c,width:d,height:u}}}function R(t,e,n){for(var o=A(t,!0),i=k(t)[e];o;){var r=k(o)[n];if(!("top"===n||"left"===n?r<=i:i<=r))return o;if(o===O())break;o=A(o,!1)}return!1}function X(t,e,n,o){for(var i=0,r=0,a=t.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==Bt.ghost&&(o||a[r]!==Bt.dragged)&&N(a[r],n.draggable,t,!1)){if(i===e)return a[r];i++}r++}return null}function Y(t,e){for(var n=t.lastElementChild;n&&(n===Bt.ghost||"none"===P(n,"display")||e&&!p(n,e));)n=n.previousElementSibling;return n||null}function B(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Bt.clone||e&&!p(t,e)||n++;return n}function E(t){var e=0,n=0,o=O();if(t)do{var r=(i=v(t)).a,i=i.d}while(e+=t.scrollLeft*r,n+=t.scrollTop*i,t!==o&&(t=t.parentNode));return[e,n]}function A(t,e){if(!t||!t.getBoundingClientRect)return O();var n=t,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=P(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return O();if(o||e)return n;o=!0}}}while(n=n.parentNode);return O()}function D(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function S(e,n){return function(){var t;g||(1===(t=arguments).length?e.call(this,t[0]):e.apply(this,t),g=setTimeout((function(){g=void 0}),n))}}function F(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function _(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function C(t,e){P(t,"position","absolute"),P(t,"top",e.top),P(t,"left",e.left),P(t,"width",e.width),P(t,"height",e.height)}function T(t){P(t,"position",""),P(t,"top",""),P(t,"left",""),P(t,"width",""),P(t,"height","")}var j="Sortable"+(new Date).getTime();var H=[],L={initializeByDefault:!0},K={mount:function(e){for(var t in L)!L.hasOwnProperty(t)||t in e||(e[t]=L[t]);H.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),H.push(e)},pluginEvent:function(e,n,o){var t=this;this.eventCanceled=!1,o.cancel=function(){t.eventCanceled=!0};var i=e+"Global";H.forEach((function(t){n[t.pluginName]&&(n[t.pluginName][i]&&n[t.pluginName][i](M({sortable:n},o)),n.options[t.pluginName]&&n[t.pluginName][e]&&n[t.pluginName][e](M({sortable:n},o)))}))},initializePlugins:function(n,o,i,t){for(var e in H.forEach((function(t){var e=t.pluginName;(n.options[e]||t.initializeByDefault)&&((t=new t(n,o,n.options)).sortable=n,t.options=n.options,n[e]=t,a(i,t.defaults))})),n.options){var r;n.options.hasOwnProperty(e)&&void 0!==(r=this.modifyOption(n,e,n.options[e]))&&(n.options[e]=r)}},getEventProperties:function(e,n){var o={};return H.forEach((function(t){"function"==typeof t.eventProperties&&a(o,t.eventProperties.call(n[t.pluginName],e))})),o},modifyOption:function(e,n,o){var i;return H.forEach((function(t){e[t.pluginName]&&t.optionListeners&&"function"==typeof t.optionListeners[n]&&(i=t.optionListeners[n].call(e[t.pluginName],o))})),i}};function W(t){var e=t.sortable,n=t.rootEl,o=t.name,i=t.targetEl,r=t.cloneEl,a=t.toEl,l=t.fromEl,s=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[j]){var g,m=e.options;t="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||y||w?(g=document.createEvent("Event")).initEvent(o,!0,!0):g=new CustomEvent(o,{bubbles:!0,cancelable:!0}),g.to=a||n,g.from=l||n,g.item=i||n,g.clone=r,g.oldIndex=s,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=h,g.pullMode=f?f.lastPutMode:void 0;var v,b=M(M({},p),K.getEventProperties(o,e));for(v in b)g[v]=b[v];n&&n.dispatchEvent(g),m[t]&&m[t].call(e,g)}}function z(t,e){var n=(o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).evt,o=i(o,G);K.pluginEvent.bind(Bt)(t,e,M({dragEl:q,parentEl:V,ghostEl:Z,rootEl:$,nextEl:Q,lastDownEl:J,cloneEl:tt,cloneHidden:et,dragStarted:pt,putSortable:lt,activeSortable:Bt.active,originalEvent:n,oldIndex:nt,oldDraggableIndex:it,newIndex:ot,newDraggableIndex:rt,hideGhostForTarget:kt,unhideGhostForTarget:Rt,cloneNowHidden:function(){et=!0},cloneNowShown:function(){et=!1},dispatchSortableEvent:function(t){U({sortable:e,name:t,originalEvent:n})}},o))}var G=["evt"];function U(t){W(M({putSortable:lt,cloneEl:tt,targetEl:q,rootEl:$,oldIndex:nt,oldDraggableIndex:it,newIndex:ot,newDraggableIndex:rt},t))}var q,V,Z,$,Q,J,tt,et,nt,ot,it,rt,at,lt,st,ct,ut,dt,ht,ft,pt,gt,mt,vt,bt,yt=!1,wt=!1,Et=[],Dt=!1,St=!1,_t=[],Ct=!1,Tt=[],xt="undefined"!=typeof document,Ot=n,At=w||y?"cssFloat":"float",Mt=xt&&!c&&!n&&"draggable"in document.createElement("div"),Nt=function(){if(xt){if(y)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),It=function(t,e){var n=P(t),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=X(t,0,e),r=X(t,1,e),a=i&&P(i),l=r&&P(r),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+k(i).width;t=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+k(r).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":"grid"===n.display?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":i&&a.float&&"none"!==a.float?(e="left"===a.float?"left":"right",!r||"both"!==l.clear&&l.clear!==e?"horizontal":"vertical"):i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||o<=s&&"none"===n[At]||r&&"none"===n[At]&&o<s+t)?"vertical":"horizontal"},Pt=function(t){function l(r,a){return function(t,e,n,o){var i=t.options.group.name&&e.options.group.name&&t.options.group.name===e.options.group.name;return!(null!=r||!a&&!i)||null!=r&&!1!==r&&(a&&"clone"===r?r:"function"==typeof r?l(r(t,e,n,o),a)(t,e,n,o):(e=(a?t:e).options.group.name,!0===r||"string"==typeof r&&r===e||r.join&&-1<r.indexOf(e)))}}var e={},n=t.group;n&&"object"==o(n)||(n={name:n}),e.name=n.name,e.checkPull=l(n.pull,!0),e.checkPut=l(n.put),e.revertClone=n.revertClone,t.group=e},kt=function(){!Nt&&Z&&P(Z,"display","none")},Rt=function(){!Nt&&Z&&P(Z,"display","")};function Xt(t){if(q){t=t.touches?t.touches[0]:t;var e=(i=t.clientX,r=t.clientY,Et.some((function(t){if((e=t[j].options.emptyInsertThreshold)&&!Y(t)){var n=k(t),o=i>=n.left-e&&i<=n.right+e,e=r>=n.top-e&&r<=n.bottom+e;return o&&e?a=t:void 0}})),a);if(e){var n,o={};for(n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[j]._onDragOver(o)}}var i,r,a}function Yt(t){q&&q.parentNode[j]._isOutsideThisEl(t.target)}function Bt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=a({},e),t[j]=this;var n,o,i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return It(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Bt.supportPointer&&"PointerEvent"in window&&!u,emptyInsertThreshold:5};for(n in K.initializePlugins(this,t,i),i)n in e||(e[n]=i[n]);for(o in Pt(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&Mt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?h(t,"pointerdown",this._onTapStart):(h(t,"mousedown",this._onTapStart),h(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(h(t,"dragover",this),h(t,"dragenter",this)),Et.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),a(this,function(){var e,o=[];return{captureAnimationState:function(){o=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){var e,n;"none"!==P(t,"display")&&t!==Bt.ghost&&(o.push({target:t,rect:k(t)}),e=M({},o[o.length-1].rect),!t.thisAnimationDuration||(n=v(t,!0))&&(e.top-=n.f,e.left-=n.e),t.fromRect=e)}))},addAnimationState:function(t){o.push(t)},removeAnimationState:function(t){o.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n);return-1}(o,{target:t}),1)},animateAll:function(t){var c=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof t&&t());var u=!1,d=0;o.forEach((function(t){var e=0,n=t.target,o=n.fromRect,i=k(n),r=n.prevFromRect,a=n.prevToRect,l=t.rect,s=v(n,!0);s&&(i.top-=s.f,i.left-=s.e),n.toRect=i,n.thisAnimationDuration&&D(r,i)&&!D(o,i)&&(l.top-i.top)/(l.left-i.left)==(o.top-i.top)/(o.left-i.left)&&(t=l,s=r,r=a,a=c.options,e=Math.sqrt(Math.pow(s.top-t.top,2)+Math.pow(s.left-t.left,2))/Math.sqrt(Math.pow(s.top-r.top,2)+Math.pow(s.left-r.left,2))*a.animation),D(i,o)||(n.prevFromRect=o,n.prevToRect=i,e=e||c.options.animation,c.animate(n,l,i,e)),e&&(u=!0,d=Math.max(d,e),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),e),n.thisAnimationDuration=e)})),clearTimeout(e),u?e=setTimeout((function(){"function"==typeof t&&t()}),d):"function"==typeof t&&t(),o=[]},animate:function(t,e,n,o){var i,r;o&&(P(t,"transition",""),P(t,"transform",""),i=(r=v(this.el))&&r.a,r=r&&r.d,i=(e.left-n.left)/(i||1),r=(e.top-n.top)/(r||1),t.animatingX=!!i,t.animatingY=!!r,P(t,"transform","translate3d("+i+"px,"+r+"px,0)"),this.forRepaintDummy=t.offsetWidth,P(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),P(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){P(t,"transition",""),P(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),o))}}}())}function Ft(t,e,n,o,i,r,a,l){var s,c,u=t[j],d=u.options.onMove;return!window.CustomEvent||y||w?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=e,s.from=t,s.dragged=n,s.draggedRect=o,s.related=i||e,s.relatedRect=r||k(e),s.willInsertAfter=l,s.originalEvent=a,t.dispatchEvent(s),d?d.call(u,s,a):c}function jt(t){t.draggable=!1}function Ht(){Ct=!1}function Lt(t){return setTimeout(t,0)}function Kt(t){return clearTimeout(t)}xt&&!c&&document.addEventListener("click",(function(t){if(wt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),wt=!1}),!0),Bt.prototype={constructor:Bt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(gt=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,q):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,o=this.el,t=this.options,i=t.preventOnFilter,r=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=t.filter;if(function(t){Tt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&Tt.push(o)}}(o),!q&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||t.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!u||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=N(l,t.draggable,o,!1))&&l.animated||J===l)){if(nt=B(l),it=B(l,t.draggable),"function"==typeof c){if(c.call(this,e,l,this))return U({sortable:n,rootEl:s,name:"filter",targetEl:l,toEl:o,fromEl:o}),z("filter",n,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c=c&&c.split(",").some((function(t){if(t=N(s,t.trim(),o,!1))return U({sortable:n,rootEl:t,name:"filter",targetEl:l,fromEl:o,toEl:o}),z("filter",n,{evt:e}),!0})))return void(i&&e.cancelable&&e.preventDefault());t.handle&&!N(s,t.handle,o,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(t,e,n){var o,i=this,r=i.el,a=i.options,l=r.ownerDocument;n&&!q&&n.parentNode===r&&(o=k(n),$=r,V=(q=n).parentNode,Q=q.nextSibling,J=n,at=a.group,st={target:Bt.dragged=q,clientX:(e||t).clientX,clientY:(e||t).clientY},ht=st.clientX-o.left,ft=st.clientY-o.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,q.style["will-change"]="all",o=function(){z("delayEnded",i,{evt:t}),Bt.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!s&&i.nativeDraggable&&(q.draggable=!0),i._triggerDragStart(t,e),U({sortable:i,name:"choose",originalEvent:t}),I(q,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){b(q,t.trim(),jt)})),h(l,"dragover",Xt),h(l,"mousemove",Xt),h(l,"touchmove",Xt),h(l,"mouseup",i._onDrop),h(l,"touchend",i._onDrop),h(l,"touchcancel",i._onDrop),s&&this.nativeDraggable&&(this.options.touchStartThreshold=4,q.draggable=!0),z("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(w||y)?o():Bt.eventCanceled?this._onDrop():(h(l,"mouseup",i._disableDelayedDrag),h(l,"touchend",i._disableDelayedDrag),h(l,"touchcancel",i._disableDelayedDrag),h(l,"mousemove",i._delayedDragTouchMoveHandler),h(l,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&h(l,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(o,a.delay)))},_delayedDragTouchMoveHandler:function(t){t=t.touches?t.touches[0]:t,Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){q&&jt(q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;f(t,"mouseup",this._disableDelayedDrag),f(t,"touchend",this._disableDelayedDrag),f(t,"touchcancel",this._disableDelayedDrag),f(t,"mousemove",this._delayedDragTouchMoveHandler),f(t,"touchmove",this._delayedDragTouchMoveHandler),f(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?h(document,"pointermove",this._onTouchMove):h(document,e?"touchmove":"mousemove",this._onTouchMove):(h(q,"dragend",this),h($,"dragstart",this._onDragStart));try{document.selection?Lt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){var n;yt=!1,$&&q?(z("dragStarted",this,{evt:e}),this.nativeDraggable&&h(document,"dragover",Yt),n=this.options,t||I(q,n.dragClass,!1),I(q,n.ghostClass,!0),Bt.active=this,t&&this._appendGhost(),U({sortable:this,name:"start",originalEvent:e})):this._nulling()},_emulateDragOver:function(){if(ct){this._lastX=ct.clientX,this._lastY=ct.clientY,kt();for(var t=document.elementFromPoint(ct.clientX,ct.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ct.clientX,ct.clientY))!==e;)e=t;if(q.parentNode[j]._isOutsideThisEl(t),e)do{if(e[j]&&e[j]._onDragOver({clientX:ct.clientX,clientY:ct.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}while(e=(t=e).parentNode);Rt()}},_onTouchMove:function(t){if(st){var n=(e=this.options).fallbackTolerance,o=e.fallbackOffset,i=t.touches?t.touches[0]:t,r=Z&&v(Z,!0),a=Z&&r&&r.a,l=Z&&r&&r.d,e=Ot&&bt&&E(bt);a=(i.clientX-st.clientX+o.x)/(a||1)+(e?e[0]-_t[0]:0)/(a||1),l=(i.clientY-st.clientY+o.y)/(l||1)+(e?e[1]-_t[1]:0)/(l||1);if(!Bt.active&&!yt){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}Z&&(r?(r.e+=a-(ut||0),r.f+=l-(dt||0)):r={a:1,b:0,c:0,d:1,e:a,f:l},r="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")"),P(Z,"webkitTransform",r),P(Z,"mozTransform",r),P(Z,"msTransform",r),P(Z,"transform",r),ut=a,dt=l,ct=i),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Z){var t=this.options.fallbackOnBody?document.body:$,e=k(q,!0,Ot,!0,t),n=this.options;if(Ot){for(bt=t;"static"===P(bt,"position")&&"none"===P(bt,"transform")&&bt!==document;)bt=bt.parentNode;bt!==document.body&&bt!==document.documentElement?(bt===document&&(bt=O()),e.top+=bt.scrollTop,e.left+=bt.scrollLeft):bt=O(),_t=E(bt)}I(Z=q.cloneNode(!0),n.ghostClass,!1),I(Z,n.fallbackClass,!0),I(Z,n.dragClass,!0),P(Z,"transition",""),P(Z,"transform",""),P(Z,"box-sizing","border-box"),P(Z,"margin",0),P(Z,"top",e.top),P(Z,"left",e.left),P(Z,"width",e.width),P(Z,"height",e.height),P(Z,"opacity","0.8"),P(Z,"position",Ot?"absolute":"fixed"),P(Z,"zIndex","100000"),P(Z,"pointerEvents","none"),Bt.ghost=Z,t.appendChild(Z),P(Z,"transform-origin",ht/parseInt(Z.style.width)*100+"% "+ft/parseInt(Z.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,o=t.dataTransfer,i=n.options;z("dragStart",this,{evt:t}),Bt.eventCanceled?this._onDrop():(z("setupClone",this),Bt.eventCanceled||((tt=_(q)).removeAttribute("id"),tt.draggable=!1,tt.style["will-change"]="",this._hideClone(),I(tt,this.options.chosenClass,!1),Bt.clone=tt),n.cloneId=Lt((function(){z("clone",n),Bt.eventCanceled||(n.options.removeCloneOnHide||$.insertBefore(tt,q),n._hideClone(),U({sortable:n,name:"clone"}))})),e||I(q,i.dragClass,!0),e?(wt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(f(document,"mouseup",n._onDrop),f(document,"touchend",n._onDrop),f(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,q)),h(document,"drop",n),P(q,"transform","translateZ(0)")),yt=!0,n._dragStartId=Lt(n._dragStarted.bind(n,e,t)),h(document,"selectstart",n),pt=!0,u&&P(document.body,"user-select","none"))},_onDragOver:function(n){var o,i,r,t,a=this.el,l=n.target,e=this.options,s=e.group,c=Bt.active,u=at===s,d=e.sort,h=lt||c,f=this,p=!1;if(!Ct){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),l=N(l,e.draggable,a,!0),T("dragOver"),Bt.eventCanceled)return p;if(q.contains(n.target)||l.animated&&l.animatingX&&l.animatingY||f._ignoreWhileAnimating===l)return O(!1);if(wt=!1,c&&!e.disabled&&(u?d||(i=V!==$):lt===this||(this.lastPutMode=at.checkPull(this,c,q,n))&&s.checkPut(this,c,q,n))){if(r="vertical"===this._getDirection(n,l),o=k(q),T("dragOverValid"),Bt.eventCanceled)return p;if(i)return V=$,x(),this._hideClone(),T("revert"),Bt.eventCanceled||(Q?$.insertBefore(q,Q):$.appendChild(q)),O(!0);if(!(g=Y(a,e.draggable))||function(t,e,n){return n=k(Y(n.el,n.options.draggable)),e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}(n,r,this)&&!g.animated){if(g===q)return O(!1);if((l=g&&a===n.target?g:l)&&(w=k(l)),!1!==Ft($,a,q,o,l,w,n,!!l))return x(),g&&g.nextSibling?a.insertBefore(q,g.nextSibling):a.appendChild(q),V=a,A(),O(!0)}else if(g&&function(t,e,n){return n=k(X(n.el,0,n.options,!0)),e?t.clientX<n.left-10||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-10||t.clientY<n.bottom&&t.clientX<n.left}(n,r,this)){if((m=X(a,0,e,!0))===q)return O(!1);if(w=k(l=m),!1!==Ft($,a,q,o,l,w,n,!1))return x(),a.insertBefore(q,m),V=a,A(),O(!0)}else if(l.parentNode===a){var v,b,y,g,w=k(l),E=q.parentNode!==a,D=(D=q.animated&&q.toRect||o,C=l.animated&&l.toRect||w,S=(t=r)?D.left:D.top,s=t?D.right:D.bottom,g=t?D.width:D.height,m=t?C.left:C.top,D=t?C.right:C.bottom,C=t?C.width:C.height,!(S===m||s===D||S+g/2===m+C/2)),S=r?"top":"left",m=(g=R(l,"top","top")||R(q,"top","top"))?g.scrollTop:void 0;if(gt!==l&&(b=w[S],Dt=!1,St=!D&&e.invertSwap||E),0!==(v=function(t,e,n,o,i,r,a,l){var s=o?t.clientY:t.clientX,c=o?n.height:n.width;t=o?n.top:n.left,o=o?n.bottom:n.right,n=!1;if(!a)if(l&&vt<c*i){if(Dt=!Dt&&(1===mt?t+c*r/2<s:s<o-c*r/2)||Dt)n=!0;else if(1===mt?s<t+vt:o-vt<s)return-mt}else if(t+c*(1-i)/2<s&&s<o-c*(1-i)/2)return function(t){return B(q)<B(t)?1:-1}(e);return(n=n||a)&&(s<t+c*r/2||o-c*r/2<s)?t+c/2<s?1:-1:0}(n,l,w,r,D?1:e.swapThreshold,null==e.invertedSwapThreshold?e.swapThreshold:e.invertedSwapThreshold,St,gt===l)))for(var _=B(q);(y=V.children[_-=v])&&("none"===P(y,"display")||y===Z););if(0===v||y===l)return O(!1);mt=v;var C=(gt=l).nextElementSibling;E=!1;if(!1!==(D=Ft($,a,q,o,l,w,n,E=1===v)))return 1!==D&&-1!==D||(E=1===D),Ct=!0,setTimeout(Ht,30),x(),E&&!C?a.appendChild(q):l.parentNode.insertBefore(q,E?C:l),g&&F(g,0,m-g.scrollTop),V=q.parentNode,void 0===b||St||(vt=Math.abs(b-k(l)[S])),A(),O(!0)}if(a.contains(q))return O(!1)}return!1}function T(t,e){z(t,f,M({evt:n,isOwner:u,axis:r?"vertical":"horizontal",revert:i,dragRect:o,targetRect:w,canSort:d,fromSortable:h,target:l,completed:O,onMove:function(t,e){return Ft($,a,q,o,t,k(t),n,e)},changed:A},e))}function x(){T("dragOverAnimationCapture"),f.captureAnimationState(),f!==h&&h.captureAnimationState()}function O(t){return T("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(f),f!==h&&(I(q,(lt||c).options.ghostClass,!1),I(q,e.ghostClass,!0)),lt!==f&&f!==Bt.active?lt=f:f===Bt.active&&lt&&(lt=null),h===f&&(f._ignoreWhileAnimating=l),f.animateAll((function(){T("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(l===q&&!q.animated||l===a&&!l.animated)&&(gt=null),e.dragoverBubble||n.rootEl||l===document||(q.parentNode[j]._isOutsideThisEl(n.target),t||Xt(n)),!e.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),p=!0}function A(){ot=B(q),rt=B(q,e.draggable),U({sortable:f,name:"change",toEl:a,newIndex:ot,newDraggableIndex:rt,originalEvent:n})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){f(document,"mousemove",this._onTouchMove),f(document,"touchmove",this._onTouchMove),f(document,"pointermove",this._onTouchMove),f(document,"dragover",Xt),f(document,"mousemove",Xt),f(document,"touchmove",Xt)},_offUpEvents:function(){var t=this.el.ownerDocument;f(t,"mouseup",this._onDrop),f(t,"touchend",this._onDrop),f(t,"pointerup",this._onDrop),f(t,"touchcancel",this._onDrop),f(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;ot=B(q),rt=B(q,n.draggable),z("drop",this,{evt:t}),V=q&&q.parentNode,ot=B(q),rt=B(q,n.draggable),Bt.eventCanceled||(Dt=St=yt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Kt(this.cloneId),Kt(this._dragStartId),this.nativeDraggable&&(f(document,"drop",this),f(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),u&&P(document.body,"user-select",""),P(q,"transform",""),t&&(pt&&(t.cancelable&&t.preventDefault(),n.dropBubble||t.stopPropagation()),Z&&Z.parentNode&&Z.parentNode.removeChild(Z),($===V||lt&&"clone"!==lt.lastPutMode)&&tt&&tt.parentNode&&tt.parentNode.removeChild(tt),q&&(this.nativeDraggable&&f(q,"dragend",this),jt(q),q.style["will-change"]="",pt&&!yt&&I(q,(lt||this).options.ghostClass,!1),I(q,this.options.chosenClass,!1),U({sortable:this,name:"unchoose",toEl:V,newIndex:null,newDraggableIndex:null,originalEvent:t}),$!==V?(0<=ot&&(U({rootEl:V,name:"add",toEl:V,fromEl:$,originalEvent:t}),U({sortable:this,name:"remove",toEl:V,originalEvent:t}),U({rootEl:V,name:"sort",toEl:V,fromEl:$,originalEvent:t}),U({sortable:this,name:"sort",toEl:V,originalEvent:t})),lt&&lt.save()):ot!==nt&&0<=ot&&(U({sortable:this,name:"update",toEl:V,originalEvent:t}),U({sortable:this,name:"sort",toEl:V,originalEvent:t})),Bt.active&&(null!=ot&&-1!==ot||(ot=nt,rt=it),U({sortable:this,name:"end",toEl:V,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){z("nulling",this),$=q=V=Z=Q=tt=J=et=st=ct=pt=ot=rt=nt=it=gt=mt=lt=at=Bt.dragged=Bt.ghost=Bt.clone=Bt.active=null,Tt.forEach((function(t){t.checked=!0})),Tt.length=ut=dt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":q&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,o=0,i=n.length,r=this.options;o<i;o++)N(t=n[o],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||function(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}(t));return e},sort:function(t,e){var n={},o=this.el;this.toArray().forEach((function(t,e){N(e=o.children[e],this.options.draggable,o,!1)&&(n[t]=e)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(o.removeChild(n[t]),o.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return N(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var o=K.modifyOption(this,t,e);n[t]=void 0!==o?o:e,"group"===t&&Pt(n)},destroy:function(){z("destroy",this);var t=this.el;t[j]=null,f(t,"mousedown",this._onTapStart),f(t,"touchstart",this._onTapStart),f(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(f(t,"dragover",this),f(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Et.splice(Et.indexOf(this.el),1),this.el=t=null},_hideClone:function(){et||(z("hideClone",this),Bt.eventCanceled||(P(tt,"display","none"),this.options.removeCloneOnHide&&tt.parentNode&&tt.parentNode.removeChild(tt),et=!0))},_showClone:function(t){"clone"===t.lastPutMode?et&&(z("showClone",this),Bt.eventCanceled||(q.parentNode!=$||this.options.group.revertClone?Q?$.insertBefore(tt,Q):$.appendChild(tt):$.insertBefore(tt,q),this.options.group.revertClone&&this.animate(q,tt),P(tt,"display",""),et=!1)):this._hideClone()}},xt&&h(document,"touchmove",(function(t){(Bt.active||yt)&&t.cancelable&&t.preventDefault()})),Bt.utils={on:h,off:f,css:P,find:b,is:function(t,e){return!!N(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:S,closest:N,toggleClass:I,clone:_,index:B,nextTick:Lt,cancelNextTick:Kt,detectDirection:It,getChild:X},Bt.get=function(t){return t[j]},Bt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];(e=e[0].constructor===Array?e[0]:e).forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Bt.utils=M(M({},Bt.utils),t.utils)),K.mount(t)}))},Bt.create=function(t,e){return new Bt(t,e)};var Wt,zt,Gt,Ut,qt,Vt,Zt=[],$t=!(Bt.version="1.15.0");function Qt(){Zt.forEach((function(t){clearInterval(t.pid)})),Zt=[]}function Jt(){clearInterval(Vt)}var te,ee=S((function(n,t,e,o){if(t.scroll){var i,r=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=O(),u=!1;zt!==e&&(zt=e,Qt(),Wt=t.scroll,i=t.scrollFn,!0===Wt&&(Wt=A(e,!0)));var d=0,h=Wt;do{var f=h,g=(p=k(f)).top,m=p.bottom,v=p.left,b=p.right,y=p.width,w=p.height,E=void 0,S=f.scrollWidth,_=f.scrollHeight,C=P(f),T=f.scrollLeft,p=f.scrollTop,D=f===c?(E=y<S&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),w<_&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(E=y<S&&("auto"===C.overflowX||"scroll"===C.overflowX),w<_&&("auto"===C.overflowY||"scroll"===C.overflowY));T=E&&(Math.abs(b-r)<=l&&T+y<S)-(Math.abs(v-r)<=l&&!!T),p=D&&(Math.abs(m-a)<=l&&p+w<_)-(Math.abs(g-a)<=l&&!!p);if(!Zt[d])for(var x=0;x<=d;x++)Zt[x]||(Zt[x]={});Zt[d].vx==T&&Zt[d].vy==p&&Zt[d].el===f||(Zt[d].el=f,Zt[d].vx=T,Zt[d].vy=p,clearInterval(Zt[d].pid),0==T&&0==p||(u=!0,Zt[d].pid=setInterval(function(){o&&0===this.layer&&Bt.active._onTouchMove(qt);var t=Zt[this.layer].vy?Zt[this.layer].vy*s:0,e=Zt[this.layer].vx?Zt[this.layer].vx*s:0;"function"==typeof i&&"continue"!==i.call(Bt.dragged.parentNode[j],e,t,n,qt,Zt[this.layer].el)||F(Zt[this.layer].el,e,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=A(h,!1)));$t=u}}),30);c=function(t){var e=t.originalEvent,n=t.putSortable,o=t.dragEl,i=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget;t=t.unhideGhostForTarget;e&&(i=n||i,a(),e=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,e=document.elementFromPoint(e.clientX,e.clientY),t(),i&&!i.el.contains(e)&&(r("spill"),this.onSpill({dragEl:o,putSortable:n})))};function ne(){}function oe(){}ne.prototype={startIndex:null,dragStart:function(t){t=t.oldDraggableIndex,this.startIndex=t},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState(),(t=X(this.sortable.el,this.startIndex,this.options))?this.sortable.el.insertBefore(e,t):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:c},a(ne,{pluginName:"revertOnSpill"}),oe.prototype={onSpill:function(t){var e=t.dragEl;(t=t.putSortable||this.sortable).captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),t.animateAll()},drop:c},a(oe,{pluginName:"removeOnSpill"});var ie,re,ae,le,se,ce=[],ue=[],de=!1,he=!1,fe=!1;function pe(n,o){ue.forEach((function(t,e){(e=o.children[t.sortableIndex+(n?Number(e):0)])?o.insertBefore(t,e):o.appendChild(t)}))}function ge(){ce.forEach((function(t){t!==ae&&t.parentNode&&t.parentNode.removeChild(t)}))}return Bt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){t=t.originalEvent,this.sortable.nativeDraggable?h(document,"dragover",this._handleAutoScroll):this.options.supportPointer?h(document,"pointermove",this._handleFallbackAutoScroll):t.touches?h(document,"touchmove",this._handleFallbackAutoScroll):h(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){t=t.originalEvent,this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?f(document,"dragover",this._handleAutoScroll):(f(document,"pointermove",this._handleFallbackAutoScroll),f(document,"touchmove",this._handleFallbackAutoScroll),f(document,"mousemove",this._handleFallbackAutoScroll)),Jt(),Qt(),clearTimeout(g),g=void 0},nulling:function(){qt=zt=Wt=$t=Vt=Gt=Ut=null,Zt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(e,n){var o,i=this,r=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,t=document.elementFromPoint(r,a);qt=e,n||this.options.forceAutoScrollFallback||w||y||u?(ee(e,this.options,t,n),o=A(t,!0),!$t||Vt&&r===Gt&&a===Ut||(Vt&&Jt(),Vt=setInterval((function(){var t=A(document.elementFromPoint(r,a),!0);t!==o&&(o=t,Qt()),ee(e,i.options,t,n)}),10),Gt=r,Ut=a)):this.options.bubbleScroll&&A(t,!0)!==O()?ee(e,this.options,A(t,!1),!1):Qt()}},a(t,{pluginName:"scroll",initializeByDefault:!0})}),Bt.mount(oe,ne),Bt.mount(new function(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){t=t.dragEl,te=t},dragOverValid:function(t){var e=t.completed,n=t.target,o=t.onMove,i=t.activeSortable,r=t.changed,a=t.cancel;i.options.swap&&(t=this.sortable.el,i=this.options,n&&n!==t&&(t=te,te=!1!==o(n)?(I(n,i.swapClass,!0),n):null,t&&t!==te&&I(t,i.swapClass,!1)),r(),e(!0),a())},drop:function(t){var e,n,o=t.activeSortable,i=t.putSortable,r=t.dragEl,a=i||this.sortable,l=this.options;te&&I(te,l.swapClass,!1),te&&(l.swap||i&&i.options.swap)&&r!==te&&(a.captureAnimationState(),a!==o&&o.captureAnimationState(),n=te,t=(e=r).parentNode,l=n.parentNode,t&&l&&!t.isEqualNode(n)&&!l.isEqualNode(e)&&(i=B(e),r=B(n),t.isEqualNode(l)&&i<r&&r++,t.insertBefore(n,t.children[i]),l.insertBefore(e,l.children[r])),a.animateAll(),a!==o&&o.animateAll())},nulling:function(){te=null}},a(t,{pluginName:"swap",eventProperties:function(){return{swapItem:te}}})}),Bt.mount(new function(){function t(o){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));o.options.avoidImplicitDeselect||(o.options.supportPointer?h(document,"pointerup",this._deselectMultiDrag):(h(document,"mouseup",this._deselectMultiDrag),h(document,"touchend",this._deselectMultiDrag))),h(document,"keydown",this._checkKeyDown),h(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(t,e){var n="";ce.length&&re===o?ce.forEach((function(t,e){n+=(e?", ":"")+t.textContent})):n=e.textContent,t.setData("Text",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){t=t.dragEl,ae=t},delayEnded:function(){this.isMultiDrag=~ce.indexOf(ae)},setupClone:function(t){var e=t.sortable;t=t.cancel;if(this.isMultiDrag){for(var n=0;n<ce.length;n++)ue.push(_(ce[n])),ue[n].sortableIndex=ce[n].sortableIndex,ue[n].draggable=!1,ue[n].style["will-change"]="",I(ue[n],this.options.selectedClass,!1),ce[n]===ae&&I(ue[n],this.options.chosenClass,!1);e._hideClone(),t()}},clone:function(t){var e=t.sortable,n=t.rootEl,o=t.dispatchSortableEvent;t=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ce.length&&re===e&&(pe(!0,n),o("clone"),t()))},showClone:function(t){var e=t.cloneNowShown,n=t.rootEl;t=t.cancel;this.isMultiDrag&&(pe(!1,n),ue.forEach((function(t){P(t,"display","")})),e(),se=!1,t())},hideClone:function(t){var e=this,n=(t.sortable,t.cloneNowHidden);t=t.cancel;this.isMultiDrag&&(ue.forEach((function(t){P(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),n(),se=!0,t())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&re&&re.multiDrag._deselectMultiDrag(),ce.forEach((function(t){t.sortableIndex=B(t)})),ce=ce.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),fe=!0},dragStarted:function(t){var e,n=this;t=t.sortable;this.isMultiDrag&&(this.options.sort&&(t.captureAnimationState(),this.options.animation&&(ce.forEach((function(t){t!==ae&&P(t,"position","absolute")})),e=k(ae,!1,!0,!0),ce.forEach((function(t){t!==ae&&C(t,e)})),de=he=!0)),t.animateAll((function(){de=he=!1,n.options.animation&&ce.forEach((function(t){T(t)})),n.options.sort&&ge()})))},dragOver:function(t){var e=t.target,n=t.completed;t=t.cancel;he&&~ce.indexOf(e)&&(n(!1),t())},revert:function(t){var n,o,e=t.fromSortable,i=t.rootEl,r=t.sortable,a=t.dragRect;1<ce.length&&(ce.forEach((function(t){r.addAnimationState({target:t,rect:he?k(t):a}),T(t),t.fromRect=a,e.removeAnimationState(t)})),he=!1,n=!this.options.removeCloneOnHide,o=i,ce.forEach((function(t,e){(e=o.children[t.sortableIndex+(n?Number(e):0)])?o.insertBefore(t,e):o.appendChild(t)})))},dragOverCompleted:function(t){var e,n=t.sortable,o=t.isOwner,i=t.insertion,r=t.activeSortable,a=t.parentEl,l=t.putSortable;t=this.options;i&&(o&&r._hideClone(),de=!1,t.animation&&1<ce.length&&(he||!o&&!r.options.sort&&!l)&&(e=k(ae,!1,!0,!0),ce.forEach((function(t){t!==ae&&(C(t,e),a.appendChild(t))})),he=!0),o||(he||ge(),1<ce.length?(o=se,r._showClone(n),r.options.animation&&!se&&o&&ue.forEach((function(t){r.addAnimationState({target:t,rect:le}),t.fromRect=le,t.thisAnimationDuration=null}))):r._showClone(n)))},dragOverAnimationCapture:function(t){var e=t.dragRect,n=t.isOwner;t=t.activeSortable;ce.forEach((function(t){t.thisAnimationDuration=null})),t.options.animation&&!n&&t.multiDrag.isMultiDrag&&(le=a({},e),e=v(ae,!0),le.top-=e.f,le.left-=e.e)},dragOverAnimationComplete:function(){he&&(he=!1,ge())},drop:function(t){var e=t.originalEvent,n=t.rootEl,o=t.parentEl,i=t.sortable,r=t.dispatchSortableEvent,a=t.oldIndex,l=t.putSortable,s=l||this.sortable;if(e){var c,u,d,h=this.options,f=o.children;if(!fe)if(h.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),I(ae,h.selectedClass,!~ce.indexOf(ae)),~ce.indexOf(ae))ce.splice(ce.indexOf(ae),1),ie=null,W({sortable:i,rootEl:n,name:"deselect",targetEl:ae,originalEvent:e});else{if(ce.push(ae),W({sortable:i,rootEl:n,name:"select",targetEl:ae,originalEvent:e}),e.shiftKey&&ie&&i.el.contains(ie)){var p=B(ie);t=B(ae);if(~p&&~t&&p!==t)for(var g,m=p<t?(g=p,t):(g=t,p+1);g<m;g++)~ce.indexOf(f[g])||(I(f[g],h.selectedClass,!0),ce.push(f[g]),W({sortable:i,rootEl:n,name:"select",targetEl:f[g],originalEvent:e}))}else ie=ae;re=s}fe&&this.isMultiDrag&&(he=!1,(o[j].options.sort||o!==n)&&1<ce.length&&(c=k(ae),u=B(ae,":not(."+this.options.selectedClass+")"),!de&&h.animation&&(ae.thisAnimationDuration=null),s.captureAnimationState(),de||(h.animation&&(ae.fromRect=c,ce.forEach((function(t){var e;t.thisAnimationDuration=null,t!==ae&&(e=he?k(t):c,t.fromRect=e,s.addAnimationState({target:t,rect:e}))}))),ge(),ce.forEach((function(t){f[u]?o.insertBefore(t,f[u]):o.appendChild(t),u++})),a===B(ae)&&(d=!1,ce.forEach((function(t){t.sortableIndex!==B(t)&&(d=!0)})),d&&r("update"))),ce.forEach((function(t){T(t)})),s.animateAll()),re=s),(n===o||l&&"clone"!==l.lastPutMode)&&ue.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=fe=!1,ue.length=0},destroyGlobal:function(){this._deselectMultiDrag(),f(document,"pointerup",this._deselectMultiDrag),f(document,"mouseup",this._deselectMultiDrag),f(document,"touchend",this._deselectMultiDrag),f(document,"keydown",this._checkKeyDown),f(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==fe&&fe||re!==this.sortable||t&&N(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;ce.length;){var e=ce[0];I(e,this.options.selectedClass,!1),ce.shift(),W({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvent:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},a(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[j];e&&e.options.multiDrag&&!~ce.indexOf(t)&&(re&&re!==e&&(re.multiDrag._deselectMultiDrag(),re=e),I(t,e.options.selectedClass,!0),ce.push(t))},deselect:function(t){var e=t.parentNode[j],n=ce.indexOf(t);e&&e.options.multiDrag&&~n&&(I(t,e.options.selectedClass,!1),ce.splice(n,1))}},eventProperties:function(){var n=this,o=[],i=[];return ce.forEach((function(t){var e;o.push({multiDragElement:t,index:t.sortableIndex}),e=he&&t!==ae?-1:he?B(t,":not(."+n.options.selectedClass+")"):B(t),i.push({multiDragElement:t,index:e})})),{items:r(ce),clones:[].concat(ue),oldIndicies:o,newIndicies:i}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":1<t.length&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}),Bt})),function(){var q=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function H(a,d,g,b){d&&(g(a={a:d,e:a}),b.push.apply(b,a.g))}function U(a){for(var d=void 0,g=a.firstChild;g;g=g.nextSibling){var b=g.nodeType;d=1===b?d?a:g:3===b&&V.test(g.nodeValue)?a:d}return d===a?void 0:d}function C(a,d){var s,b={};!function(){for(var g=a.concat(d),j=[],k={},c=0,i=g.length;c<i;++c){var r=g[c],n=r[3];if(n)for(var e=n.length;--e>=0;)b[n.charAt(e)]=r;n=""+(r=r[1]),k.hasOwnProperty(n)||(j.push(r),k[n]=q)}j.push(/[\S\s]/),s=function(a){function d(e){var b=e.charCodeAt(0);if(92!==b)return b;var a=e.charAt(1);return(b=r[a])?b:"0"<=a&&a<="7"?parseInt(e.substring(1),8):"u"===a||"x"===a?parseInt(e.substring(2),16):e.charCodeAt(1)}function g(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):"\\"===(e=String.fromCharCode(e))||"-"===e||"]"===e||"^"===e?"\\"+e:e}function b(e){var b=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),c=(e=[],["["]);(a="^"===b[0])&&c.push("^");for(var a=a?1:0,f=b.length;a<f;++a){var l,h=b[a];if(/\\[bdsw]/i.test(h))c.push(h);else h=d(h),a+2<f&&"-"===b[a+1]?(l=d(b[a+2]),a+=2):l=h,e.push([h,l]),l<65||h>122||(l<65||h>90||e.push([32|Math.max(65,h),32|Math.min(l,90)]),l<97||h>122||e.push([-33&Math.max(97,h),-33&Math.min(l,122)]))}for(e.sort((function(e,a){return e[0]-a[0]||a[1]-e[1]})),b=[],f=[],a=0;a<e.length;++a)(h=e[a])[0]<=f[1]+1?f[1]=Math.max(f[1],h[1]):b.push(f=h);for(a=0;a<b.length;++a)h=b[a],c.push(g(h[0])),h[1]>h[0]&&(h[1]+1>h[0]&&c.push("-"),c.push(g(h[1])));return c.push("]"),c.join("")}function s(e){for(var a=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),c=a.length,d=[],f=0,h=0;f<c;++f){var l=a[f];"("===l?++h:"\\"===l.charAt(0)&&(l=+l.substring(1))&&(l<=h?d[l]=-1:a[f]=g(l))}for(f=1;f<d.length;++f)-1===d[f]&&(d[f]=++x);for(h=f=0;f<c;++f)"("===(l=a[f])?d[++h]||(a[f]="(?:"):"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=h&&(a[f]="\\"+d[l]);for(f=0;f<c;++f)"^"===a[f]&&"^"!==a[f+1]&&(a[f]="");if(e.ignoreCase&&m)for(f=0;f<c;++f)e=(l=a[f]).charAt(0),l.length>=2&&"["===e?a[f]=b(l):"\\"!==e&&(a[f]=l.replace(/[A-Za-z]/g,(function(a){return a=a.charCodeAt(0),"["+String.fromCharCode(-33&a,32|a)+"]"})));return a.join("")}for(var x=0,m=!1,j=!1,k=0,c=a.length;k<c;++k){var i=a[k];if(i.ignoreCase)j=!0;else if(/[a-z]/i.test(i.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){m=!0,j=!1;break}}var r={b:8,t:9,n:10,v:11,f:12,r:13},n=[];for(k=0,c=a.length;k<c;++k){if((i=a[k]).global||i.multiline)throw Error(""+i);n.push("(?:"+s(i)+")")}return RegExp(n.join("|"),j?"gi":"g")}(j)}();var x=d.length;return function g(a){for(var j=a.e,k=[j,"pln"],c=0,i=a.a.match(s)||[],r={},n=0,e=i.length;n<e;++n){var f,z=i[n],w=r[z],t=void 0;if("string"==typeof w)f=!1;else{var h=b[z.charAt(0)];if(h)t=z.match(h[1]),w=h[0];else{for(f=0;f<x;++f)if(h=d[f],t=z.match(h[1])){w=h[0];break}t||(w="pln")}!(f=w.length>=5&&"lang-"===w.substring(0,5))||t&&"string"==typeof t[1]||(f=!1,w="src"),f||(r[z]=w)}if(h=c,c+=z.length,f){f=t[1];var l=z.indexOf(f),B=l+f.length;t[2]&&(l=(B=z.length-t[2].length)-f.length),w=w.substring(5),H(j+h,z.substring(0,l),g,k),H(j+h+l,f,I(w,f),k),H(j+h+B,z.substring(B),g,k)}else k.push(j+h,w)}a.g=k}}function v(a){var d=[],g=[];a.tripleQuotedStrings?d.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):a.multiLineStrings?d.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):d.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]),a.verbatimStrings&&g.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var b=a.hashComments;if(b&&(a.cStyleComments?(b>1?d.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):d.push(["com",/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),g.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,q])):d.push(["com",/^#[^\n\r]*/,q,"#"])),a.cStyleComments&&(g.push(["com",/^\/\/[^\n\r]*/,q]),g.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q])),b=a.regexLiterals){var s=(b=b>1?"":"\n\r")?".":"[\\S\\s]";g.push(["lang-regex",RegExp("^(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*(/(?=[^/*"+b+"])(?:[^/\\x5B\\x5C"+b+"]|\\x5C"+s+"|\\x5B(?:[^\\x5C\\x5D"+b+"]|\\x5C"+s+")*(?:\\x5D|$))+/)")])}return(b=a.types)&&g.push(["typ",b]),(b=(""+a.keywords).replace(/^ | $/g,"")).length&&g.push(["kwd",RegExp("^(?:"+b.replace(/[\s,]+/g,"|")+")\\b"),q]),d.push(["pln",/^\s+/,q," \r\n\t "]),b="^.[^\\s\\w.$@'\"`/\\\\]*",a.regexLiterals&&(b+="(?!s*/)"),g.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",RegExp(b),q]),C(d,g)}function J(a,d,g){function b(a){var c=a.nodeType;if(1!=c||x.test(a.className)){if((3==c||4==c)&&g){var d=a.nodeValue,i=d.match(m);i&&(c=d.substring(0,i.index),a.nodeValue=c,(d=d.substring(i.index+i[0].length))&&a.parentNode.insertBefore(j.createTextNode(d),a.nextSibling),s(a),c||a.parentNode.removeChild(a))}}else if("br"===a.nodeName)s(a),a.parentNode&&a.parentNode.removeChild(a);else for(a=a.firstChild;a;a=a.nextSibling)b(a)}function s(a){for(;!a.nextSibling;)if(!(a=a.parentNode))return;var d;for(a=function b(a,c){var d=c?a.cloneNode(!1):a;if(e=a.parentNode){var e=b(e,1),g=a.nextSibling;e.appendChild(d);for(var i=g;i;i=g)g=i.nextSibling,e.appendChild(i)}return d}(a.nextSibling,0);(d=a.parentNode)&&1===d.nodeType;)a=d;c.push(a)}for(var x=/(?:^|\s)nocode(?:\s|$)/,m=/\r\n?|\n/,j=a.ownerDocument,k=j.createElement("li");a.firstChild;)k.appendChild(a.firstChild);for(var c=[k],i=0;i<c.length;++i)b(c[i]);d===(0|d)&&c[0].setAttribute("value",d);var r=j.createElement("ol");r.className="linenums";d=Math.max(0,d-1|0)||0,i=0;for(var n=c.length;i<n;++i)(k=c[i]).className="L"+(i+d)%10,k.firstChild||k.appendChild(j.createTextNode(" ")),r.appendChild(k);a.appendChild(r)}function p(a,d){for(var g=d.length;--g>=0;){var b=d[g];F.hasOwnProperty(b)?D.console&&console.warn("cannot override language handler %s",b):F[b]=a}}function I(a,d){return a&&F.hasOwnProperty(a)||(a=/^\s*</.test(d)?"default-markup":"default-code"),F[a]}function K(a){var d=a.h;try{var g=function(a,d){var b=/(?:^|\s)nocode(?:\s|$)/,s=[],x=0,m=[],j=0;return function g(a){var c=a.nodeType;if(1==c){if(!b.test(a.className)){for(c=a.firstChild;c;c=c.nextSibling)g(c);"br"!==(c=a.nodeName.toLowerCase())&&"li"!==c||(s[j]="\n",m[j<<1]=x++,m[j++<<1|1]=a)}}else 3!=c&&4!=c||(c=a.nodeValue).length&&(c=d?c.replace(/\r\n?/g,"\n"):c.replace(/[\t\n\r ]+/g," "),s[j]=c,m[j<<1]=x,x+=c.length,m[j++<<1|1]=a)}(a),{a:s.join("").replace(/\n$/,""),d:m}}(a.c,a.i),b=g.a;a.a=b,a.d=g.d,a.e=0,I(d,b)(a);var n,e,s=(s=/\bMSIE\s(\d+)/.exec(navigator.userAgent))&&+s[1]<=8,x=(d=/\n/g,a.a),m=x.length,j=(g=0,a.d),k=j.length,c=(b=0,a.g),i=c.length,r=0;for(c[i]=m,e=n=0;e<i;)c[e]!==c[e+2]?(c[n++]=c[e++],c[n++]=c[e++]):e+=2;for(i=n,e=n=0;e<i;){for(var p=c[e],w=c[e+1],t=e+2;t+2<=i&&c[t+1]===w;)t+=2;c[n++]=p,c[n++]=w,e=t}c.length=n;var h,f=a.c;f&&(h=f.style.display,f.style.display="none");try{for(;b<k;){var G,l=j[b+2]||m,B=c[r+2]||m,A=(t=Math.min(l,B),j[b+1]);if(1!==A.nodeType&&(G=x.substring(g,t))){s&&(G=G.replace(d,"\r")),A.nodeValue=G;var L=A.ownerDocument,o=L.createElement("span");o.className=c[r+1];var v=A.parentNode;v.replaceChild(o,A),o.appendChild(A),g<l&&(j[b+1]=A=L.createTextNode(x.substring(t,l)),v.insertBefore(A,o.nextSibling))}(g=t)>=l&&(b+=2),g>=B&&(r+=2)}}finally{f&&(f.style.display=h)}}catch(u){D.console&&console.log(u&&u.stack||u)}}var E,y,D=window,M=[E=[[y=["break,continue,do,else,for,if,return,while"],"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],N=[E,"abstract,assert,boolean,byte,extends,final,finally,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],O=[N,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,internal,into,is,let,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],P=[y,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],Q=[y,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],W=[y,"as,assert,const,copy,drop,enum,extern,fail,false,fn,impl,let,log,loop,match,mod,move,mut,priv,pub,pure,ref,self,static,struct,true,trait,type,unsafe,use"],R=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,V=/\S/,X=v({keywords:[M,O,E=[E,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",P,Q,y=[y,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"]],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),F={};p(X,["default-code"]),p(C([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),p(C([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),p(C([],[["atv",/^[\S\s]+/]]),["uq.val"]),p(v({keywords:M,hashComments:!0,cStyleComments:!0,types:R}),["c","cc","cpp","cxx","cyc","m"]),p(v({keywords:"null,true,false"}),["json"]),p(v({keywords:O,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:R}),["cs"]),p(v({keywords:N,cStyleComments:!0}),["java"]),p(v({keywords:y,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]),p(v({keywords:P,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]),p(v({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]),p(v({keywords:Q,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]),p(v({keywords:E,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]),p(v({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),p(v({keywords:W,cStyleComments:!0,multilineStrings:!0}),["rc","rs","rust"]),p(C([],[["str",/^[\S\s]+/]]),["regex"]);var Y=D.PR={createSimpleLexer:C,registerLangHandler:p,sourceDecorator:v,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ",prettyPrintOne:D.prettyPrintOne=function(a,d,g){var b=document.createElement("div");return b.innerHTML="<pre>"+a+"</pre>",b=b.firstChild,g&&J(b,g,!0),K({h:d,j:g,c:b,i:1}),b.innerHTML},prettyPrint:D.prettyPrint=function(a,d){for(var s=(b=d||document.body).ownerDocument||document,b=[b.getElementsByTagName("pre"),b.getElementsByTagName("code"),b.getElementsByTagName("xmp")],p=[],m=0;m<b.length;++m)for(var j=0,k=b[m].length;j<k;++j)p.push(b[m][j]);b=q;var c=Date;c.now||(c={now:function(){return+new Date}});var i=0,n=/\blang(?:uage)?-([\w.]+)(?!\S)/,e=/\bprettyprint\b/,v=/\bprettyprinted\b/,w=/pre|xmp/i,t=/^code$/i,f=/^(?:pre|code|xmp)$/i,h={};!function g(){for(var b=D.PR_SHOULD_USE_CONTINUATION?c.now()+250:1/0;i<p.length&&c.now()<b;i++){for(var d=p[i],j=h,k=d;k=k.previousSibling;){if((o=(7===(m=k.nodeType)||8===m)&&k.nodeValue)?!/^\??prettify\b/.test(o):3!==m||/\S/.test(k.nodeValue))break;if(o){j={},o.replace(/\b(\w+)=([\w%+\-.:]+)/g,(function(a,b,c){j[b]=c}));break}}if(k=d.className,(j!==h||e.test(k))&&!v.test(k)){for(m=!1,o=d.parentNode;o;o=o.parentNode)if(f.test(o.tagName)&&o.className&&e.test(o.className)){m=!0;break}if(!m){var m,y;if(d.className+=" prettyprinted",!(m=j.lang))!(m=k.match(n))&&(y=U(d))&&t.test(y.tagName)&&(m=y.className.match(n)),m&&(m=m[1]);if(w.test(d.tagName))o=1;else{var o=d.currentStyle,u=s.defaultView;o=(o=o?o.whiteSpace:u&&u.getComputedStyle?u.getComputedStyle(d,q).getPropertyValue("white-space"):0)&&"pre"===o.substring(0,3)}(u="true"===(u=j.linenums)||+u)||(u=!!(u=k.match(/\blinenums\b(?::(\d+))?/))&&(!u[1]||!u[1].length||+u[1])),u&&J(d,u,o),K({h:m,c:d,j:u,i:o})}}}i<p.length?setTimeout(g,250):"function"==typeof a&&a()}()}};"function"==typeof define&&define.amd&&define("google-code-prettify",[],(function(){return Y}))}()}(),void 0===$.oc&&($.oc={}),void 0===$.oc.langMessages&&($.oc.langMessages={}),$.oc.lang=function(lang,messages){return lang.load=function(locale){void 0===messages[locale]&&(messages[locale]={}),lang.loadedMessages=messages[locale]},lang.get=function(name,defaultValue){if(name){var result=lang.loadedMessages;return defaultValue||(defaultValue=name),$.each(name.split("."),(function(index,value){if(void 0===result[value])return result=defaultValue,!1;result=result[value]})),result}},void 0===lang.locale&&(lang.locale=$("html").attr("lang")||"en"),void 0===lang.loadedMessages&&lang.load(lang.locale),lang}($.oc.lang||{},$.oc.langMessages),function($){void 0===$.oc&&($.oc={}),$.oc.alert=function(message,title){var messageTitle="string"!=typeof title?$.oc.lang.get("alert.error"):title;$.oc.vueComponentHelpers.modalUtils.showAlert(messageTitle,message,{buttonText:$.oc.lang.get("alert.dismiss")})},$.oc.confirm=function(message,callback,title){"string"!=typeof title&&$.oc.lang.get("alert.confirm");$.oc.confirmPromise(message,title).then((function(){callback(!0)}),(function(){}))},$.oc.confirmPromise=function(message,title){var messageTitle="string"!=typeof title?$.oc.lang.get("alert.confirm"):title;return $.oc.vueComponentHelpers.modalUtils.showConfirm(messageTitle,message,{})}}(jQuery),$(window).on("ajaxErrorMessage",(function(event,message){message&&($.oc.alert(message),event.preventDefault())})),$(window).on("ajaxConfirmMessage",(function(event,message){if(message)return $.oc.confirm(message,(function(isConfirm){isConfirm?event.promise.resolve():event.promise.reject()})),event.preventDefault(),!0})),$(document).on("ajaxPromise","[data-request]",(function(){var $target=$(this);void 0!==$target.data("attach-loading")&&$target.addClass("oc-loading").prop("disabled",!0),$target.is("form")&&$("[data-attach-loading]",$target).addClass("oc-loading").prop("disabled",!0)})).on("ajaxFail ajaxDone","[data-request]",(function(){var $target=$(this);void 0!==$target.data("attach-loading")&&$target.removeClass("oc-loading").prop("disabled",!1),$target.is("form")&&$("[data-attach-loading]",$target).removeClass("oc-loading").prop("disabled",!1)})),function($){"use strict";void 0===$.oc&&($.oc={});$.oc.snackbar=new function(){var queue=[],lastUniqueId=0,displayedMessage=null;function runQueue(){if(null===displayedMessage){var parameters=queue.shift();void 0!==parameters&&function(parameters){displayedMessage={uniqueId:parameters.uniqueId};var $element=$('                    <div class="october-snackbar">                         <div class="snackbar-label"></div>                         <button class="snackbar-dismiss" aria-title="Dismiss">X</button>                     </div>'),$label=$element.find(".snackbar-label");if($label.text(parameters.message),$element.find(".snackbar-dismiss").one("click.snackbar",(function(){hideSnackbar($element,parameters.options)})),parameters.options&&parameters.options.action){var $actionButton=$('<button class="snackbar-action"></button>');$actionButton.text(parameters.options.action.label),$actionButton.one("click.snackbar",(function(){parameters.options.action.callback(),hideSnackbar($element,parameters.options)})),$actionButton.insertAfter($label)}$(document.body).append($element),displayedMessage.element=$element,displayedMessage.uniqueId=parameters.uniqueId,displayedMessage.options=parameters.options,setTimeout((function(){$element.addClass("enter"),setTimeout((function(){$element.addClass("show-snackbar"),function($element,options){var timeout=2e3;options&&options.timeout&&(timeout=options.timeout);options.timeoutId=setTimeout((function(){hideSnackbar($element,options)}),timeout)}($element,parameters.options)}),20)}),1)}(parameters)}}function hideSnackbar($element,options){$element.find("button").off(".snackbar"),$element.removeClass("show-snackbar"),clearTimeout(options.timeoutId),setTimeout((function(){displayedMessage=null,$element.remove(),runQueue()}),210)}function forceHideSnackbar($element,options){clearTimeout(options.timeoutId),options.timeoutId=setTimeout((function(){hideSnackbar($element,options)}),200)}this.show=function(message,options){!function(options){if(void 0!==options){if("object"!=typeof options)throw new Error("Snackbar options must be an object");if(void 0!==options.replace&&"number"!=typeof options.replace)throw new Error("Snackbar options.replace must be a number");if(void 0!==options.timeout){if("number"!=typeof options.timeout)throw new Error("Snackbar options.timeout must be a number");if(options.timeout<2e3)throw new Error("Snackbar options.timeout cannot be lower than 2000");if(options.timeout>8e3)throw new Error("Snackbar options.timeout cannot be higher than 8000")}if(void 0!==options.action){if("object"!=typeof options.action)throw new Error("Snackbar options.action must be an object");if("string"!=typeof options.action.label)throw new Error("Snackbar options.action.label must be a string");if("function"!=typeof options.action.callback)throw new Error("Snackbar options.action.callback must be a function")}}}(options),options&&options.replace&&(displayedMessage&&options.replace===displayedMessage.uniqueId?forceHideSnackbar(displayedMessage.element,displayedMessage.options):function(uniqueId){for(var index=0;index<queue.length;index++)if(queue[index].uniqueId==uniqueId)return void queue.splice(index,1)}(options.replace));var uniqueId=++lastUniqueId;return queue.push({message:message,options:options||{},uniqueId:uniqueId}),runQueue(),uniqueId},this.hide=function(uniqueId){displayedMessage&&uniqueId===displayedMessage.uniqueId&&forceHideSnackbar(displayedMessage.element,displayedMessage.options)}}}(window.jQuery),function($){"use strict";var Base=$.oc.foundation.base,BaseProto=Base.prototype,Scrollpad=function(element,options){this.$el=$(element),this.scrollbarElement=null,this.dragHandleElement=null,this.scrollContentElement=null,this.contentElement=null,this.options=options,this.scrollbarSize=null,this.updateScrollbarTimer=null,this.dragOffset=null,Base.call(this),this.init(),$.oc.foundation.controlUtils.markDisposable(element)};(Scrollpad.prototype=Object.create(BaseProto)).constructor=Scrollpad,Scrollpad.prototype.dispose=function(){this.unregisterHandlers(),this.$el.get(0).removeChild(this.scrollbarElement),this.$el.removeData("oc.scrollpad"),this.$el=null,this.scrollbarElement=null,this.dragHandleElement=null,this.scrollContentElement=null,this.contentElement=null,BaseProto.dispose.call(this)},Scrollpad.prototype.scrollToStart=function(){var scrollAttr="vertical"==this.options.direction?"scrollTop":"scrollLeft";this.scrollContentElement[scrollAttr]=0},Scrollpad.prototype.update=function(){this.updateScrollbarSize()},Scrollpad.prototype.init=function(){this.build(),this.setScrollContentSize(),this.registerHandlers()},Scrollpad.prototype.build=function(){var el=this.$el.get(0);this.scrollContentElement=el.children[0],this.contentElement=this.scrollContentElement.children[0],this.$el.prepend('<div class="scrollpad-scrollbar"><div class="drag-handle"></div></div>'),this.scrollbarElement=el.querySelector(".scrollpad-scrollbar"),this.dragHandleElement=el.querySelector(".scrollpad-scrollbar > .drag-handle")},Scrollpad.prototype.registerHandlers=function(){this.$el.on("mouseenter",this.proxy(this.onMouseEnter)),this.$el.on("mouseleave",this.proxy(this.onMouseLeave)),this.$el.one("dispose-control",this.proxy(this.dispose)),this.scrollContentElement.addEventListener("scroll",this.proxy(this.onScroll)),this.dragHandleElement.addEventListener("mousedown",this.proxy(this.onStartDrag))},Scrollpad.prototype.unregisterHandlers=function(){this.$el.off("mouseenter",this.proxy(this.onMouseEnter)),this.$el.off("mouseleave",this.proxy(this.onMouseLeave)),this.$el.off("dispose-control",this.proxy(this.dispose)),this.scrollContentElement.removeEventListener("scroll",this.proxy(this.onScroll)),this.dragHandleElement.removeEventListener("mousedown",this.proxy(this.onStartDrag)),document.removeEventListener("mousemove",this.proxy(this.onMouseMove)),document.removeEventListener("mouseup",this.proxy(this.onEndDrag))},Scrollpad.prototype.setScrollContentSize=function(){var scrollbarSize=this.getScrollbarSize();"vertical"==this.options.direction?this.scrollContentElement.setAttribute("style","margin-right: -"+scrollbarSize+"px"):this.scrollContentElement.setAttribute("style","margin-bottom: -"+scrollbarSize+"px")},Scrollpad.prototype.getScrollbarSize=function(){if(null!==this.scrollbarSize)return this.scrollbarSize;var testerElement=document.createElement("div");testerElement.setAttribute("class","scrollpad-scrollbar-size-tester"),testerElement.appendChild(document.createElement("div")),document.body.appendChild(testerElement);var width=testerElement.offsetWidth,innerWidth=testerElement.querySelector("div").offsetWidth;return document.body.removeChild(testerElement),width===innerWidth&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1?this.scrollbarSize=17:this.scrollbarSize=width-innerWidth},Scrollpad.prototype.updateScrollbarSize=function(){this.scrollbarElement.removeAttribute("data-hidden");var contentSize="vertical"==this.options.direction?this.contentElement.scrollHeight:this.contentElement.scrollWidth,scrollOffset="vertical"==this.options.direction?this.scrollContentElement.scrollTop:this.scrollContentElement.scrollLeft,scrollbarSize="vertical"==this.options.direction?this.scrollbarElement.offsetHeight:this.scrollbarElement.offsetWidth,scrollbarRatio=scrollbarSize/contentSize,handleOffset=Math.round(scrollbarRatio*scrollOffset)+2,handleSize=Math.floor(scrollbarRatio*(scrollbarSize-2))-2;scrollbarSize<contentSize?("vertical"==this.options.direction?this.dragHandleElement.setAttribute("style","top: "+handleOffset+"px; height: "+handleSize+"px"):this.dragHandleElement.setAttribute("style","left: "+handleOffset+"px; width: "+handleSize+"px"),this.scrollbarElement.removeAttribute("data-hidden")):this.scrollbarElement.setAttribute("data-hidden",!0)},Scrollpad.prototype.displayScrollbar=function(){this.clearUpdateScrollbarTimer(),this.updateScrollbarSize(),this.scrollbarElement.setAttribute("data-visible","true")},Scrollpad.prototype.hideScrollbar=function(){this.scrollbarElement.removeAttribute("data-visible")},Scrollpad.prototype.clearUpdateScrollbarTimer=function(){null!==this.updateScrollbarTimer&&(clearTimeout(this.updateScrollbarTimer),this.updateScrollbarTimer=null)},Scrollpad.prototype.onMouseEnter=function(){this.displayScrollbar()},Scrollpad.prototype.onMouseLeave=function(){this.hideScrollbar()},Scrollpad.prototype.onScroll=function(){null===this.updateScrollbarTimer&&(this.updateScrollbarTimer=setTimeout(this.proxy(this.displayScrollbar),10))},Scrollpad.prototype.onStartDrag=function(ev){$.oc.foundation.event.stop(ev);var pageCoords=$.oc.foundation.event.pageCoordinates(ev),eventOffset="vertical"==this.options.direction?pageCoords.y:pageCoords.x,handleCoords=$.oc.foundation.element.absolutePosition(this.dragHandleElement),handleOffset="vertical"==this.options.direction?handleCoords.top:handleCoords.left;this.dragOffset=eventOffset-handleOffset,document.addEventListener("mousemove",this.proxy(this.onMouseMove)),document.addEventListener("mouseup",this.proxy(this.onEndDrag))},Scrollpad.prototype.onMouseMove=function(ev){$.oc.foundation.event.stop(ev);var eventCoordsAttr="vertical"==this.options.direction?"y":"x",elementCoordsAttr="vertical"==this.options.direction?"top":"left",offsetAttr="vertical"==this.options.direction?"offsetHeight":"offsetWidth",scrollAttr="vertical"==this.options.direction?"scrollTop":"scrollLeft",dragPerc=($.oc.foundation.event.pageCoordinates(ev)[eventCoordsAttr]-$.oc.foundation.element.absolutePosition(this.scrollbarElement)[elementCoordsAttr]-this.dragOffset)/this.scrollbarElement[offsetAttr];dragPerc>1&&(dragPerc=1);var scrollPos=dragPerc*this.contentElement[offsetAttr];this.scrollContentElement[scrollAttr]=scrollPos},Scrollpad.prototype.onEndDrag=function(ev){document.removeEventListener("mousemove",this.proxy(this.onMouseMove)),document.removeEventListener("mouseup",this.proxy(this.onEndDrag))},Scrollpad.DEFAULTS={direction:"vertical"};var old=$.fn.scrollpad;$.fn.scrollpad=function(option){var args=Array.prototype.slice.call(arguments,1),result=void 0;return this.each((function(){var $this=$(this),data=$this.data("oc.scrollpad"),options=$.extend({},Scrollpad.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.scrollpad",data=new Scrollpad(this,options)),"string"==typeof option&&(result=data[option].apply(data,args)),void 0!==result)return!1})),result||this},$.fn.scrollpad.Constructor=Scrollpad,$.fn.scrollpad.noConflict=function(){return $.fn.scrollpad=old,this},$(document).on("render",(function(){$("div[data-control=scrollpad]").scrollpad()}))}(window.jQuery),function($){"use strict";void 0===$.oc&&($.oc={});var SideNav=function(element,options){this.options=options,this.$el=$(element),this.$list=$("ul",this.$el),this.$items=$("li",this.$list),this.init(),this.initResponsive()};function setCounterValue($counter,value){$counter.toggleClass("empty",0==value),$counter.text(value)}function setCountersValue(itemId,$el,value){setCounterValue($('span.counter[data-menu-id="'+itemId+'"]',$el),value),setCounterValue($('span.counter[data-menu-id="'+itemId+'"]',"#layout-sidenav-responsive"),value),setCounterValue($('span.counter[data-menu-id="'+itemId+'"]',"#layout-mainmenu"),value)}SideNav.DEFAULTS={activeClass:"active"},SideNav.prototype.init=function(){var self=this;this.$list.dragScroll({vertical:!0,useNative:!1,useDrag:!0,start:function(){self.$list.addClass("drag")},stop:function(){self.$list.removeClass("drag")},scrollClassContainer:self.$el,scrollMarkerContainer:self.$el}),this.$list.on("click",(function(){if(self.$list.hasClass("drag"))return!1}))},SideNav.prototype.initResponsive=function(){var $sideNav=$("#layout-sidenav-responsive"),$items=$("ul li",$sideNav),self=this;$items.click((function(){var itemId=$(this).data("menu-item");itemId&&($(this).data("no-side-panel")||($items.removeClass(self.options.activeClass).filter("[data-menu-item="+itemId+"]").addClass(self.options.activeClass),$("[data-menu-item="+itemId+"]:first",self.$list).trigger("click")))}))},SideNav.prototype.unsetActiveItem=function(itemId){this.$items.removeClass(this.options.activeClass)},SideNav.prototype.setActiveItem=function(itemId){itemId&&this.$items.removeClass(this.options.activeClass).filter("[data-menu-item="+itemId+"]").addClass(this.options.activeClass)},SideNav.prototype.setCounter=function(itemId,value){return setCountersValue(itemId,this.$el,value),this},SideNav.prototype.increaseCounter=function(itemId,value){var $counter=$('span.counter[data-menu-id="'+itemId+'"]',this.$el),originalValue=parseInt($counter.text());isNaN(originalValue)&&(originalValue=0);var newValue=value+originalValue;return setCountersValue(itemId,this.$el,newValue),this},SideNav.prototype.dropCounter=function(itemId){return this.setCounter(itemId,0),this};var old=$.fn.sideNav;$.fn.sideNav=function(option){var result,args=Array.prototype.slice.call(arguments,1);return this.each((function(){var $this=$(this),data=$this.data("oc.sideNav"),options=$.extend({},SideNav.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.sideNav",data=new SideNav(this,options)),"string"==typeof option&&(result=data[option].apply(data,args)),void 0!==result)return!1;void 0===$.oc.sideNav&&($.oc.sideNav=data)})),result||this},$.fn.sideNav.Constructor=SideNav,$.fn.sideNav.noConflict=function(){return $.fn.sideNav=old,this},$(document).ready((function(){$('[data-control="sidenav"]').sideNav()}))}(window.jQuery),function($){"use strict";var Base=$.oc.foundation.base,BaseProto=Base.prototype,Scrollbar=function(element,options){var $el=this.$el=$(element),el=$el.get(0),self=this,isNative=(options=this.options=options||{},this.sizeName=options.vertical?"height":"width",$("html").hasClass("mobile")),isTouch=this.isTouch=Modernizr.touchevents,eventElementName=(this.isScrollable=!1,this.isLocked=!1,options.vertical?"pageY":"pageX"),dragStart=0,startOffset=0;if($.oc.foundation.controlUtils.markDisposable(element),Base.call(this),this.$el.one("dispose-control",this.proxy(this.dispose)),!isNative){this.$scrollbar=$("<div />").addClass("scrollbar-scrollbar"),this.$track=$("<div />").addClass("scrollbar-track").appendTo(this.$scrollbar),this.$thumb=$("<div />").addClass("scrollbar-thumb").appendTo(this.$track),$el.addClass("drag-scrollbar").addClass(options.vertical?"vertical":"horizontal").prepend(this.$scrollbar),isTouch?this.$el.on("touchstart",(function(event){var touchEvent=event.originalEvent;1==touchEvent.touches.length&&(startDrag(touchEvent.touches[0]),event.stopPropagation())})):(this.$thumb.on("mousedown",(function(event){startDrag(event)})),this.$track.on("mouseup",(function(event){moveDrag(event)}))),$el.mousewheel((function(event){return!function(offset){startOffset=self.options.vertical?el.scrollTop:el.scrollLeft,$el.trigger("oc.scrollStart"),self.options.vertical?$el.scrollTop(startOffset+offset):$el.scrollLeft(startOffset+offset);var scrolled=self.options.vertical?el.scrollTop!=startOffset:el.scrollLeft!=startOffset;self.setThumbPosition(),isWebkit?$el.trigger("oc.scrollEnd"):(void 0!==self.endScrollTimeout&&(clearTimeout(self.endScrollTimeout),self.endScrollTimeout=void 0),self.endScrollTimeout=setTimeout((function(){$el.trigger("oc.scrollEnd"),self.endScrollTimeout=void 0}),50));return scrolled}((self.options.vertical?event.deltaFactor*event.deltaY*-1:event.deltaFactor*event.deltaX)*self.options.scrollSpeed)})),$el.on("oc.scrollbar.gotoStart",(function(event){self.options.vertical?$el.scrollTop(0):$el.scrollLeft(0),self.update(),event.stopPropagation()})),$(window).on("resize",$.proxy(this.update,this)),$(window).on("oc.updateUi",$.proxy(this.update,this));var isWebkit=$(document.documentElement).hasClass("webkit");setTimeout((function(){self.update()}),1)}function startDrag(event){$("body").addClass("drag-noselect"),$el.trigger("oc.scrollStart"),dragStart=event[eventElementName],startOffset=self.options.vertical?$el.scrollTop():$el.scrollLeft(),isTouch?($(window).on("touchmove.scrollbar",(function(event){moveDrag(event.originalEvent.touches[0])&&event.preventDefault()})),$el.on("touchend.scrollbar",stopDrag)):($(window).on("mousemove.scrollbar",(function(event){return moveDrag(event),!1})),$(window).on("mouseup.scrollbar",(function(){return stopDrag(),!1})))}function moveDrag(event){self.isLocked=!0;var offset,dragTo=event[eventElementName];if(self.isTouch)offset=dragStart-dragTo;else{var ratio=self.getCanvasSize()/self.getViewportSize();offset=(dragTo-dragStart)*ratio}return self.options.vertical?$el.scrollTop(startOffset+offset):$el.scrollLeft(startOffset+offset),self.setThumbPosition(),self.options.vertical?el.scrollTop!=startOffset:el.scrollLeft!=startOffset}function stopDrag(){$("body").removeClass("drag-noselect"),$el.trigger("oc.scrollEnd"),$(window).off(".scrollbar")}};(Scrollbar.prototype=Object.create(BaseProto)).constructor=Scrollbar,Scrollbar.prototype.dispose=function(){this.unregisterHandlers(),BaseProto.dispose.call(this)},Scrollbar.prototype.unregisterHandlers=function(){},Scrollbar.DEFAULTS={vertical:!0,scrollSpeed:2,animation:!0,start:function(){},drag:function(){},stop:function(){}},Scrollbar.prototype.update=function(){this.$scrollbar&&(this.$scrollbar.hide(),this.setThumbSize(),this.setThumbPosition(),this.$scrollbar.show())},Scrollbar.prototype.setThumbSize=function(){var properties=this.calculateProperties();this.isScrollable=!(properties.thumbSizeRatio>=1),this.$scrollbar.toggleClass("disabled",!this.isScrollable),this.options.vertical?(this.$track.height(properties.canvasSize),this.$thumb.height(properties.thumbSize)):(this.$track.width(properties.canvasSize),this.$thumb.width(properties.thumbSize))},Scrollbar.prototype.setThumbPosition=function(){var properties=this.calculateProperties();this.options.vertical?this.$thumb.css({top:properties.thumbPosition}):this.$thumb.css({left:properties.thumbPosition})},Scrollbar.prototype.calculateProperties=function(){var $el=this.$el,properties={};properties.viewportSize=this.getViewportSize(),properties.canvasSize=this.getCanvasSize(),properties.scrollAmount=this.options.vertical?$el.scrollTop():$el.scrollLeft();return properties.thumbSizeRatio=properties.viewportSize/(properties.canvasSize-1),properties.thumbSize=properties.viewportSize*properties.thumbSizeRatio,properties.thumbPositionRatio=properties.scrollAmount/(properties.canvasSize-properties.viewportSize),properties.thumbPosition=(properties.viewportSize-properties.thumbSize)*properties.thumbPositionRatio+properties.scrollAmount,isNaN(properties.thumbPosition)&&(properties.thumbPosition=0),properties},Scrollbar.prototype.getViewportSize=function(){return this.options.vertical?this.$el.height():this.$el.width()},Scrollbar.prototype.getCanvasSize=function(){return this.options.vertical?this.$el.get(0).scrollHeight:this.$el.get(0).scrollWidth},Scrollbar.prototype.gotoElement=function(element,callback){var $el=$(element);if($el.length){var offset=0,animated=!1,params={duration:300,queue:!1,complete:function(){void 0!==callback&&callback()}};return this.options.vertical?(offset=$el.get(0).offsetTop-this.$el.scrollTop(),this.options.animation?offset<0?(this.$el.animate({scrollTop:$el.get(0).offsetTop},params),animated=!0):(offset=$el.get(0).offsetTop-(this.$el.scrollTop()+this.$el.outerHeight()))>0&&(this.$el.animate({scrollTop:$el.get(0).offsetTop+$el.outerHeight()-this.$el.outerHeight()},params),animated=!0):offset<0?this.$el.scrollTop($el.get(0).offsetTop):(offset=$el.get(0).offsetTop-(this.$el.scrollTop()+this.$el.outerHeight()))>0&&this.$el.scrollTop($el.get(0).offsetTop+$el.outerHeight()-this.$el.outerHeight())):(offset=$el.get(0).offsetLeft-this.$el.scrollLeft())<0?(this.$el.animate({scrollLeft:$el.get(0).offsetLeft},params),animated=!0):(offset=$el.get(0).offsetLeft+$el.outerWidth()-(this.$el.scrollLeft()+this.$el.outerWidth()))>0&&(this.$el.animate({scrollLeft:$el.get(0).offsetLeft+$el.outerWidth()-this.$el.outerWidth()},params),animated=!0),animated||void 0===callback||callback(),this}},Scrollbar.prototype.dispose=function(){this.$el=null,this.$scrollbar=null,this.$track=null,this.$thumb=null};var old=$.fn.scrollbar;$.fn.scrollbar=function(option){return this.each((function(){var $this=$(this),data=$this.data("oc.scrollbar"),options=$.extend({},Scrollbar.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("oc.scrollbar",data=new Scrollbar(this,options)),"string"==typeof option&&data[option].call($this)}))},$.fn.scrollbar.Constructor=Scrollbar,$.fn.scrollbar.noConflict=function(){return $.fn.scrollbar=old,this},$(document).render((function(){$("[data-control=scrollbar]").scrollbar()}))}(window.jQuery),function($){"use strict";var FileList=function(element,options){this.options=options,this.$el=$(element),this.init()};FileList.DEFAULTS={ignoreItemClick:!1},FileList.prototype.init=function(){var self=this;this.$el.on("click","li.group > h4 > a, li.group > div.group",(function(){return self.toggleGroup($(this).closest("li")),!1})),this.options.ignoreItemClick||this.$el.on("click","li.item > a",(function(event){var e=$.Event("open.oc.list",{relatedTarget:$(this).parent().get(0),clickEvent:event});return self.$el.trigger(e,this),!1})),this.$el.on("ajaxUpdate",$.proxy(this.update,this))},FileList.prototype.toggleGroup=function(group){var $group=$(group);"expanded"==$group.attr("data-status")?this.collapseGroup($group):this.expandGroup($group)},FileList.prototype.collapseGroup=function(group){var $list=$("> ul, > div.subitems",group);$list.css("overflow","hidden"),$list.animate({height:0},{duration:100,queue:!1,complete:function(){$list.css({overflow:"visible",display:"none"}),$(group).attr("data-status","collapsed"),$(window).trigger("resize")}}),this.sendGroupStatusRequest(group,0)},FileList.prototype.expandGroup=function(group){var $list=$("> ul, > div.subitems",group);$list.css({overflow:"hidden",display:"block",height:0}),$list.animate({height:$list[0].scrollHeight},{duration:100,queue:!1,complete:function(){$list.css({overflow:"visible",height:"auto"}),$(group).attr("data-status","expanded"),$(window).trigger("resize")}}),this.sendGroupStatusRequest(group,1)},FileList.prototype.sendGroupStatusRequest=function(group,status){if(void 0!==this.options.groupStatusHandler){var groupId=$(group).data("group-id");void 0===groupId&&(groupId=$("> h4 a",group).text()),$(group).request(this.options.groupStatusHandler,{data:{group:groupId,status:status}})}},FileList.prototype.markActive=function(dataId){$("li.item",this.$el).removeClass("active"),dataId&&$('li.item[data-id="'+dataId+'"]',this.$el).addClass("active"),this.dataId=dataId},FileList.prototype.update=function(){void 0!==this.dataId&&this.markActive(this.dataId)};var old=$.fn.fileList;$.fn.fileList=function(option){var args=arguments;return this.each((function(){var $this=$(this),data=$this.data("oc.fileList"),options=$.extend({},FileList.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.fileList",data=new FileList(this,options)),"string"==typeof option){for(var methodArgs=[],i=1;i<args.length;i++)methodArgs.push(args[i]);data[option].apply(data,methodArgs)}}))},$.fn.fileList.Constructor=FileList,$.fn.fileList.noConflict=function(){return $.fn.fileList=old,this},$(document).ready((function(){$("[data-control=filelist]").fileList()}))}(window.jQuery),function($){var OctoberLayout=function(){};OctoberLayout.prototype.setPageTitle=function(title){var $title=$("title");void 0===this.pageTitleTemplate&&(this.pageTitleTemplate=$title.data("titleTemplate")),$title.text(this.pageTitleTemplate.replace("%s",title))},OctoberLayout.prototype.updateLayout=function(title){var $children,$el,fixedWidth,margin;$("[data-calculate-width]").each((function(){($children=$(this).children()).length>0&&(fixedWidth=0,$children.each((function(){$el=$(this),void 0===(margin=$el.data("oc.layoutMargin"))&&(margin=parseInt($el.css("marginRight"))+parseInt($el.css("marginLeft")),$el.data("oc.layoutMargin",margin)),fixedWidth+=$el.get(0).offsetWidth+margin})),$(this).width(fixedWidth),$(this).trigger("oc.widthFixed"))}))},void 0===$.oc&&($.oc={}),$.oc.layout=new OctoberLayout,$(document).ready((function(){$.oc.layout.updateLayout(),window.setTimeout($.oc.layout.updateLayout,100)})),$(window).on("resize",(function(){$.oc.layout.updateLayout()})),$(window).on("oc.updateUi",(function(){$.oc.layout.updateLayout()}))}(jQuery),function($){"use strict";var SidePanelTab=function(element,options){this.options=options,this.$el=$(element),this.init()};SidePanelTab.prototype.init=function(){var self=this;this.tabOpenDelay=200,this.tabOpenTimeout=void 0,this.panelOpenTimeout=void 0,this.$sideNav=$("#layout-sidenav"),this.$sideNavRes=$("#layout-sidenav-responsive"),this.$sideNavItems=$("ul li",this.$sideNav),this.$sidePanelItems=$("[data-content-id]",this.$el),this.sideNavWidth=$("#layout-sidenav").outerWidth(),this.mainNavHeight=$.oc.backendCalculateTopContainerOffset(),this.panelVisible=!1,this.visibleItemId=!1,this.$sideNavItems.click((function(){if(!$(this).data("no-side-panel")){if($(window).width()<self.options.breakpoint){if($(this).data("menu-item")==self.visibleItemId&&self.panelVisible)return void self.hideSidePanel();self.displaySidePanel()}return self.displayTab(this),!1}})),$("#layout-body").click((function(){if(self.panelVisible)return self.hideSidePanel(),!1})),self.$el.on("close.oc.sidePanel",(function(){self.hideSidePanel()})),this.updateActiveTab()},SidePanelTab.prototype.displayTab=function(menuItem){var menuItemId=$(menuItem).data("menu-item");this.visibleItemId=menuItemId,$.oc.sideNav.setActiveItem(menuItemId),this.$sidePanelItems.each((function(){var $el=$(this);$el.toggleClass("hide",$el.data("content-id")!=menuItemId)})),$(window).trigger("resize")},SidePanelTab.prototype.displaySidePanel=function(){$(document.body).addClass("display-side-panel"),this.$sideNavRes.is(":visible")&&(this.mainNavHeight=$.oc.backendCalculateTopContainerOffset()+this.$sideNavRes.outerHeight()),$("#layout-sidenav").is(":visible")?this.sideNavWidth=$("#layout-sidenav").outerWidth():this.sideNavWidth=0,this.$el.appendTo("#layout-canvas"),this.panelVisible=!0,this.$el.css({left:this.sideNavWidth,top:this.mainNavHeight}),this.updatePanelPosition(),$(window).trigger("resize")},SidePanelTab.prototype.hideSidePanel=function(){$(document.body).removeClass("display-side-panel"),0==this.$el.next("#layout-body").length&&$("#layout-body").before(this.$el),this.panelVisible=!1,this.updateActiveTab()},SidePanelTab.prototype.updatePanelPosition=function(){this.$el.height($(document).height()-this.mainNavHeight),this.panelVisible&&$(window).width()>this.options.breakpoint&&this.hideSidePanel()},SidePanelTab.prototype.updateActiveTab=function(){!this.panelVisible&&$(window).width()<this.options.breakpoint?$.oc.sideNav.unsetActiveItem():$.oc.sideNav.setActiveItem(this.visibleItemId)},SidePanelTab.DEFAULTS={breakpoint:769};var old=$.fn.sidePanelTab;$.fn.sidePanelTab=function(option){return this.each((function(){var $this=$(this),data=$this.data("oc.sidePanelTab"),options=$.extend({},SidePanelTab.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("oc.sidePanelTab",data=new SidePanelTab(this,options)),"string"==typeof option&&data[option].call(data)}))},$.fn.sidePanelTab.Constructor=SidePanelTab,$.fn.sidePanelTab.noConflict=function(){return $.fn.sidePanelTab=old,this},$(document).ready((function(){$("[data-control=layout-sidepanel]").sidePanelTab()}))}(window.jQuery),function($){"use strict";var SimpleList=function(element,options){var $el=this.$el=$(element);if(this.options=options||{},$el.hasClass("is-sortable")){var sortableOptions={distance:10};this.options.sortableHandle&&(sortableOptions.handle=this.options.sortableHandle),$el.find(".drag-handle").length>0&&(sortableOptions.handle=".drag-handle"),$el.find("> ul, > ol").each((function(){Sortable.create(this,sortableOptions)}))}$el.hasClass("is-scrollable")&&($el.wrapInner($("<div />").addClass("control-scrollbar")),$el.find(">.control-scrollbar:first").scrollbar())};SimpleList.DEFAULTS={sortableHandle:null};var old=$.fn.simplelist;$.fn.simplelist=function(option){return this.each((function(){var $this=$(this),data=$this.data("oc.simplelist"),options=$.extend({},SimpleList.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("oc.simplelist",data=new SimpleList(this,options))}))},$.fn.simplelist.Constructor=SimpleList,$.fn.simplelist.noConflict=function(){return $.fn.simplelist=old,this},$(document).render((function(){$('[data-control="simplelist"]').simplelist()}))}(window.jQuery),function($){"use strict";var Base=$.oc.foundation.base,BaseProto=Base.prototype,TreeListWidget=function(element,options){this.$el=$(element),this.options=options||{},Base.call(this),$.oc.foundation.controlUtils.markDisposable(element),this.init()};(TreeListWidget.prototype=Object.create(BaseProto)).constructor=TreeListWidget,TreeListWidget.prototype.init=function(){var sortableOptions={handle:this.options.handle,nested:this.options.nested,onDrop:this.proxy(this.onDrop),afterMove:this.proxy(this.onAfterMove)};this.$el.find("> ol").sortable($.extend(sortableOptions,this.options)),this.options.nested||this.$el.find("> ol ol").sortable($.extend(sortableOptions,this.options)),this.$el.one("dispose-control",this.proxy(this.dispose))},TreeListWidget.prototype.dispose=function(){this.unbind(),BaseProto.dispose.call(this)},TreeListWidget.prototype.unbind=function(){this.$el.off("dispose-control",this.proxy(this.dispose)),this.$el.find("> ol").sortable("destroy"),this.options.nested||this.$el.find("> ol ol").sortable("destroy"),this.$el.removeData("oc.treelist"),this.$el=null,this.options=null},TreeListWidget.DEFAULTS={handle:null,nested:!0},TreeListWidget.prototype.onDrop=function($item,container,_super){this.$el&&(this.$el.trigger("move.oc.treelist",{item:$item,container:container}),_super($item,container))},TreeListWidget.prototype.onAfterMove=function($placeholder,container,$closestEl){this.$el&&this.$el.trigger("aftermove.oc.treelist",{placeholder:$placeholder,container:container,closestEl:$closestEl})};var old=$.fn.treeListWidget;$.fn.treeListWidget=function(option){var result;return this.each((function(){var $this=$(this),data=$this.data("oc.treelist"),options=$.extend({},TreeListWidget.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.treelist",data=new TreeListWidget(this,options)),"string"==typeof option&&(result=data[option].call(data)),void 0!==result)return!1})),result||this},$.fn.treeListWidget.Constructor=TreeListWidget,$.fn.treeListWidget.noConflict=function(){return $.fn.treeListWidget=old,this},$(document).render((function(){$('[data-control="treelist"]').treeListWidget()}))}(window.jQuery),function($){"use strict";var SidenavTree=function(element,options){this.options=options,this.$el=$(element),this.init()};SidenavTree.DEFAULTS={treeName:"sidenav_tree",rememberSearch:!1},SidenavTree.prototype.init=function(){var self=this;if($(document.body).addClass("has-sidenav-tree"),this.statusCookieName=this.options.treeName+"groupStatus",this.searchCookieName=this.options.treeName+"search",this.$searchInput=$(this.options.searchInput),this.$el.on("click","li > div.group",(function(){return self.toggleGroup($(this).closest("li")),!1})),this.$searchInput.on("input",(function(){self.handleSearchChange()})),this.options.rememberSearch){var searchTerm=$.cookie(this.searchCookieName);void 0!==searchTerm&&searchTerm.length>0&&(this.$searchInput.val(searchTerm),this.applySearch())}var scrollbar=$("[data-control=scrollbar]",this.$el).data("oc.scrollbar"),active=$("li.active",this.$el);active.length>0&&scrollbar.gotoElement(active)},SidenavTree.prototype.toggleGroup=function(group){var $group=$(group),status=$group.attr("data-status");void 0===status||"expanded"==status?this.collapseGroup($group):this.expandGroup($group)},SidenavTree.prototype.collapseGroup=function(group){var $list=$("> ul",group),self=this;$list.css("overflow","hidden"),$list.animate({height:0},{duration:100,queue:!1,complete:function(){$list.css({overflow:"visible",display:"none"}),$(group).attr("data-status","collapsed"),$(window).trigger("oc.updateUi"),self.saveGroupStatus($(group).data("group-code"),!0)}})},SidenavTree.prototype.expandGroup=function(group,duration){var $list=$("> ul",group),self=this;duration=void 0===duration?100:duration,$list.css({overflow:"hidden",height:0}),$list.animate({height:$list[0].scrollHeight},{duration:duration,queue:!1,complete:function(){$list.css({overflow:"visible",height:"auto",display:""}),$(group).attr("data-status","expanded"),$(window).trigger("oc.updateUi"),self.saveGroupStatus($(group).data("group-code"),!1)}})},SidenavTree.prototype.saveGroupStatus=function(groupCode,collapsed){var collapsedGroups=$.cookie(this.statusCookieName),updatedGroups=[];void 0===collapsedGroups&&(collapsedGroups=""),collapsedGroups=collapsedGroups.split("|"),$.each(collapsedGroups,(function(){groupCode!=this&&updatedGroups.push(this)})),collapsed&&updatedGroups.push(groupCode),$.cookie(this.statusCookieName,updatedGroups.join("|"),{expires:30,path:"/"})},SidenavTree.prototype.handleSearchChange=function(){var lastValue=this.$searchInput.data("oc.lastvalue");if(void 0===lastValue||lastValue!=this.$searchInput.val()){this.$searchInput.data("oc.lastvalue",this.$searchInput.val()),void 0!==this.dataTrackInputTimer&&window.clearTimeout(this.dataTrackInputTimer);var self=this;this.dataTrackInputTimer=window.setTimeout((function(){self.applySearch()}),300),$.cookie(this.searchCookieName,$.trim(this.$searchInput.val()),{expires:30,path:"/"})}},SidenavTree.prototype.applySearch=function(){var query=$.trim(this.$searchInput.val()),words=query.toLowerCase().split(" "),visibleGroups=[],visibleItems=[],self=this;return 0==query.length?($("li",this.$el).removeClass("hidden"),void this.$el.removeClass("is-searching")):(this.$el.addClass("is-searching"),$("ul.top-level > li",this.$el).each((function(){var $li=$(this);self.textContainsWords($("div.group h3",$li).text(),words)?(visibleGroups.push($li.get(0)),$("ul li",$li).each((function(){visibleItems.push(this)}))):$("ul li",$li).each((function(){(self.textContainsWords($(this).text(),words)||self.textContainsWords($(this).data("keywords"),words))&&(visibleGroups.push($li.get(0)),visibleItems.push(this))}))})),$("ul.top-level > li",this.$el).each((function(){var $li=$(this),groupIsVisible=-1!==$.inArray(this,visibleGroups);$li.toggleClass("hidden",!groupIsVisible),groupIsVisible&&self.expandGroup($li,0),$("ul li",$li).each((function(){$(this).toggleClass("hidden",-1==$.inArray(this,visibleItems))}))})),$(window).trigger("resize"),!1)},SidenavTree.prototype.textContainsWords=function(text,words){text=text.toLowerCase();for(var i=0;i<words.length;i++)if(-1===text.indexOf(words[i]))return!1;return!0};var old=$.fn.sidenavTree;$.fn.sidenavTree=function(option){var args=arguments;return this.each((function(){var $this=$(this),data=$this.data("oc.sidenavTree"),options=$.extend({},SidenavTree.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.sidenavTree",data=new SidenavTree(this,options)),"string"==typeof option){for(var methodArgs=[],i=1;i<args.length;i++)methodArgs.push(args[i]);data[option].apply(data,methodArgs)}}))},$.fn.sidenavTree.Constructor=SidenavTree,$.fn.sidenavTree.noConflict=function(){return $.fn.sidenavTree=old,this},$(document).ready((function(){$("[data-control=sidenav-tree]").sidenavTree()}))}(window.jQuery),function($){"use strict";var Base=$.oc.foundation.base,BaseProto=Base.prototype,DateTimeConverter=function(element,options){this.$el=$(element),this.options=options||{},$.oc.foundation.controlUtils.markDisposable(element),Base.call(this),this.init()};(DateTimeConverter.prototype=Object.create(BaseProto)).constructor=DateTimeConverter,DateTimeConverter.prototype.init=function(){this.initDefaults(),this.$el.text(this.getDateTimeValue()),this.$el.one("dispose-control",this.proxy(this.dispose))},DateTimeConverter.prototype.dispose=function(){this.$el.off("dispose-control",this.proxy(this.dispose)),this.$el.removeData("oc.dateTimeConverter"),this.$el=null,this.options=null,BaseProto.dispose.call(this)},DateTimeConverter.prototype.initDefaults=function(){this.options.timezone||(this.options.timezone=$('meta[name="backend-timezone"]').attr("content")),this.options.locale||(this.options.locale=$('meta[name="backend-locale"]').attr("content")),this.options.format||(this.options.format="llll"),this.options.formatAlias&&(this.options.format=this.getFormatFromAlias(this.options.formatAlias)),this.appTimezone=$('meta[name="app-timezone"]').attr("content"),this.appTimezone||(this.appTimezone="UTC")},DateTimeConverter.prototype.getDateTimeValue=function(){this.datetime=this.$el.attr("datetime"),this.$el.get(0).hasAttribute("data-ignore-timezone")&&(this.appTimezone="UTC",this.options.timezone="UTC");var momentObj=moment.tz(this.datetime,this.appTimezone);return this.options.locale&&(momentObj=momentObj.locale(this.options.locale)),this.options.timezone&&(momentObj=momentObj.tz(this.options.timezone)),this.options.timeSince?momentObj.fromNow():this.options.timeTense?momentObj.calendar():momentObj.format(this.options.format)},DateTimeConverter.prototype.getFormatFromAlias=function(alias){var map={time:"LT",timeLong:"LTS",date:"L",dateMin:"l",dateLong:"LL",dateLongMin:"ll",dateTime:"LLL",dateTimeMin:"lll",dateTimeLong:"LLLL",dateTimeLongMin:"llll"};return map[alias]?map[alias]:"llll"},DateTimeConverter.DEFAULTS={format:null,formatAlias:null,timezone:null,locale:null,timeTense:!1,timeSince:!1};var old=$.fn.dateTimeConverter;$.fn.dateTimeConverter=function(option){var items,result,args=Array.prototype.slice.call(arguments,1);return items=this.each((function(){var $this=$(this),data=$this.data("oc.dateTimeConverter"),options=$.extend({},DateTimeConverter.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.dateTimeConverter",data=new DateTimeConverter(this,options)),"string"==typeof option&&(result=data[option].apply(data,args)),void 0!==result)return!1})),result||items},$.fn.dateTimeConverter.Constructor=DateTimeConverter,$.fn.dateTimeConverter.noConflict=function(){return $.fn.dateTimeConverter=old,this},$(document).render((function(){$("time[data-datetime-control]").dateTimeConverter()}))}(window.jQuery),function($){"use strict";$.oc.responsiveMenu=function(closeCallback){var $mainMenuElement=$("#layout-mainmenu .navbar ul.mainmenu-items"),$menuContainer=$mainMenuElement.closest(".layout-row"),$responsiveMenuContainer=$("#layout-mainmenu-responsive-container"),$responsiveMainMenuPane=$responsiveMenuContainer.find(".mainmenu-pane"),$responsiveSubMenuPane=$responsiveMenuContainer.find(".submenu-pane"),$responsiveMainMenu=$responsiveMainMenuPane.find("ul.mainmenu-items"),$responsiveSubMenu=$responsiveSubMenuPane.find("ul.mainmenu-items"),$subMenuHeader=$responsiveSubMenuPane.find(".menu-header"),$subMenuHeaderMenuItem=$subMenuHeader.find(".mainmenu-item");function initScrollablePanel(el){el.addEventListener("scroll",(function(evt){!function(el){$(el.parentElement).toggleClass("scrolled",el.scrollTop>0)}(evt.target)}),{capture:!0,passive:!0})}function initMenuScroll($menu){$menu.dragScroll({vertical:!0,useNative:!1,useDrag:!0})}function onMainMenuItemClick(ev){var $menuItem=$(ev.currentTarget),$item=$menuItem.closest(".mainmenu-item");if($item.hasClass("has-subitems")){var submenuIndex=$item.data("submenuIndex"),$submenu=$menuContainer.find(".mainmenu-submenu-dropdown[data-submenu-index="+submenuIndex+"]");$responsiveSubMenu.html($submenu.html()),$subMenuHeaderMenuItem.html($menuItem.html()),$subMenuHeader.attr("data-submenu-index",submenuIndex),$(document.body).addClass("responsive-submenu-displayed"),ev.preventDefault()}}function onCloseSubmenuClick(ev){$(document.body).removeClass("responsive-submenu-displayed"),ev.preventDefault()}function onMenuMenuCloseClick(){closeCallback()}this.show=function(){$responsiveMainMenu.dragScroll("goToStart"),$responsiveSubMenu.dragScroll("goToStart"),$(document.body).addClass("responsive-menu-displayed")},this.hide=function(){$(document.body).removeClass("responsive-menu-displayed"),window.setTimeout((function(){$(document.body).removeClass("responsive-submenu-displayed")}),250)},$mainMenuElement.length&&(initMenuScroll($responsiveMainMenu),initMenuScroll($responsiveSubMenu),$(document.body).on("click",".mainmenu-items",(function(){if($(document.body).hasClass("drag"))return!1})),initScrollablePanel($responsiveMainMenu.get(0)),initScrollablePanel($responsiveSubMenu.get(0)),$responsiveMainMenuPane.on("click",".mainmenu-item",onMainMenuItemClick),$responsiveSubMenuPane.on("click","a.go-back-link",onCloseSubmenuClick),$responsiveMainMenuPane.on("click","a.close-link",onMenuMenuCloseClick))}}(window.jQuery),function($){"use strict";function MainMenu(){var $mainMenuElement=$(".layout-mainmenu .navbar ul.mainmenu-items"),$leftMenuElement=$("#layout-mainmenu-left"),$leftMenuMainMenu=$leftMenuElement.find("[data-control=toolbar]"),$leftMenuExtrasMenu=$leftMenuElement.find(".mainmenu-extras"),$mainMenuToolbar=$(".layout-mainmenu [data-control=toolbar]"),$menuContainer=$("#layout-mainmenu").closest(".layout-row"),menuHeight=$.oc.backendCalculateTopContainerOffset(),responsiveMenu=new $.oc.responsiveMenu(hideMenus),leftMenuDebounceTimer=null,leftMenuWidth=null,leftMenuLeaveDebounceTimer=null,$overlay=null,isTouch=!1,$leftMenuOverlay=null;function onKeyDown(ev){27==ev.keyCode&&hideMenus(null,!0)}function onLeftMenuTouch(ev){isTouch=!0}function onLeftMenuItemClick(ev){if(isTouch&&!$(document.body).hasClass("reveal-left-side-menu"))return onLeftMenuMouseEnter(),ev.stopPropagation(),ev.preventDefault(),!1}function onLeftMenuMouseEnter(){leftMenuLeaveDebounceTimer&&(window.clearTimeout(leftMenuLeaveDebounceTimer),leftMenuLeaveDebounceTimer=null),$(document.body).hasClass("reveal-left-side-menu")||(leftMenuDebounceTimer&&window.clearTimeout(leftMenuDebounceTimer),leftMenuDebounceTimer=window.setTimeout(showLeftMenu,100))}function onLeftMenuMouseLeave(){$(document.body).hasClass("left-menu-submenu-displayed")||(leftMenuDebounceTimer&&(window.clearTimeout(leftMenuDebounceTimer),leftMenuDebounceTimer=null),leftMenuLeaveDebounceTimer&&window.clearTimeout(leftMenuLeaveDebounceTimer),leftMenuLeaveDebounceTimer=window.setTimeout(hideLeftMenu,300))}function showLeftMenu(){$(document.body).addClass("reveal-left-side-menu"),$leftMenuElement.data("original-width")||$leftMenuElement.data("original-width",$leftMenuElement.width()),addKeyListener(),getLeftMenuOverlay().addClass("show"),$leftMenuElement.width(function(){if(null!==leftMenuWidth)return leftMenuWidth;var leftMenuContainer=$leftMenuElement.closest(".left-side-menu-container");leftMenuContainer.addClass("width-check");var extrasWidth=0;return $leftMenuExtrasMenu.find(".nav-label").each((function(){var labelTotalWidth=$(this).offset().left+$(this).outerWidth(!0)+20;extrasWidth=Math.max(extrasWidth,labelTotalWidth)})),leftMenuWidth=Math.max($leftMenuMainMenu.outerWidth(),extrasWidth),leftMenuContainer.removeClass("width-check"),leftMenuWidth}())}function hideLeftMenu(){leftMenuLeaveDebounceTimer&&(window.clearTimeout(leftMenuLeaveDebounceTimer),leftMenuLeaveDebounceTimer=null),$leftMenuElement.width($leftMenuElement.data("original-width")),getLeftMenuOverlay().removeClass("show"),$(document.body).removeClass("reveal-left-side-menu")}function addKeyListener(){$(document).on("keydown.mainmenusubmenu",onKeyDown)}function hideMenus(ev,hideAll){var isSubmenuDisplayed=$(document.body).hasClass("left-menu-submenu-displayed");getOverlay().removeClass("show"),$menuContainer.find(".mainmenu-submenu-dropdown.show").removeClass("show"),$(document.body).removeClass("left-menu-submenu-displayed"),$(document).off(".mainmenusubmenu"),isSubmenuDisplayed&&!hideAll||(hideLeftMenu(),responsiveMenu.hide())}function getOverlay(){return $overlay||(($overlay=$('<div class="mainmenu-submenu-overlay"></div>').appendTo(document.body)).on("click",(function(ev){hideMenus(0,ev.pageX>$leftMenuElement.outerWidth())})),$overlay)}function getLeftMenuOverlay(){return $leftMenuOverlay||(($leftMenuOverlay=$('<div class="mainmenu-leftmenu-overlay"></div>').appendTo(document.body)).on("click",hideMenus),$leftMenuOverlay)}function onItemClick(ev){var $li=$(ev.currentTarget).closest("li");return ev.preventDefault(),$(document.body).hasClass("drag")||function($li){var submenuIndex=$li.data("submenuIndex"),$submenu=$menuContainer.find(".mainmenu-submenu-dropdown[data-submenu-index="+submenuIndex+"]"),isLeftSideMenu=$li.closest("#layout-mainmenu-left").length>0;if(getOverlay().addClass("show"),isLeftSideMenu){$(document.body).addClass("left-menu-submenu-displayed");var menuTop=$li.offset().top;$submenu.css({top:menuTop,left:$leftMenuElement.outerWidth()})}else{var menuLeft=$li.offset().left;$submenu.css({top:menuHeight,left:menuLeft})}if($submenu.addClass("invisible"),$submenu.addClass("show"),isLeftSideMenu){var submenuPosition=$submenu.position(),menuBottom=$submenu.height()+submenuPosition.top,windowHeight=window.scrollY+$(document.body).height();menuBottom>windowHeight-20&&$submenu.css({top:submenuPosition.top-(menuBottom-windowHeight)-20})}else{var menuRight=menuLeft+$submenu.width(),windowWidth=$(window).width();menuRight>windowWidth-20&&$submenu.css({left:menuLeft-(menuRight-windowWidth)-20})}$submenu.removeClass("invisible"),addKeyListener()}($li),!1}function onShowResponsiveMenuClick(ev){return ev.preventDefault(),addKeyListener(),getOverlay().addClass("show"),responsiveMenu.show(),!1}$leftMenuElement.find("li a").on("touchstart",onLeftMenuTouch).on("click",onLeftMenuItemClick),$mainMenuElement.on("click","li.has-subitems",onItemClick),$mainMenuElement.on("click",".mainmenu-toggle",onShowResponsiveMenuClick),$leftMenuElement.on("mouseenter",onLeftMenuMouseEnter),$leftMenuElement.on("mouseleave",onLeftMenuMouseLeave),$mainMenuToolbar.each((function(){var dragScroll=$(this).data("oc.dragScroll");dragScroll&&dragScroll.goToElement($(this).find("ul.mainmenu-items > li.active"),void 0,{duration:0,alignBottom:!0})})),this.reload=function(mainMenuHtml,mainMenuLeftHtml,sidenavResponsiveHtml){$("#layout-mainmenu").html(mainMenuHtml),$("#layout-mainmenu-left").html(mainMenuLeftHtml),$("#layout-sidenav-responsive").html(sidenavResponsiveHtml),$.oc.mainMenu=new MainMenu}}$(document).ready((function(){$.oc.mainMenu=new MainMenu}))}(window.jQuery),function($){"use strict";$.oc.modalFocusManager=new function(){var modalStack=[];function addEventAndCall(callback){$(document).on("focusin.octoberfocusmanager",callback),callback(null)}function removeCallbacks(){$(document).off(".octoberfocusmanager")}this.push=function(focusInCallback,type,uid,isHotkeyBlocking){removeCallbacks(),addEventAndCall(focusInCallback),modalStack.push({focusInCallback:focusInCallback,type:type,uid:uid,isHotkeyBlocking:isHotkeyBlocking})},this.hasHotkeyBlockingAbove=function(uid){for(var uidIndex=function(uid){for(var index=0;index<modalStack.length;index++)if(modalStack[index].uid==uid)return index;return null}(uid),index=null!==uidIndex?uidIndex:0;index<modalStack.length;index++)if(modalStack[index].isHotkeyBlocking)return!0;return!1},this.getTop=function(){return modalStack.length>0?modalStack[modalStack.length-1]:null},this.isUidTop=function(uid){var top=this.getTop();return null!==top&&void 0!==top.uid&&top.uid===uid},this.getNumberOfType=function(type){for(var result=0,index=0;index<modalStack.length;index++)modalStack[index].type==type&&result++;return result},this.pop=function(){(modalStack.pop(),removeCallbacks(),modalStack.length>0)&&addEventAndCall(modalStack[modalStack.length-1].focusInCallback)}}}(window.jQuery),function($){"use strict";window.jQuery.oc.domIdManager=new function(){var indexes=1;this.generate=function(prefix){var result="id-"+indexes++;return"string"==typeof prefix&&(result=prefix+"-"+result),result}}}(),function($){"use strict";$.oc.vueUtils=new function(){function findTraverseObjects(objectArray,currentKey,keyProperty){for(var index=0;index<objectArray.length;index++)if(objectArray[index][keyProperty]===currentKey)return objectArray[index];return null}this.getObjectProperty=function(obj,propertyPath){for(var pathParts=propertyPath.split("."),currentObject=obj,index=0;index<pathParts.length;index++){var currentProperty=pathParts[index];if(void 0===currentObject[currentProperty])return;currentObject=currentObject[currentProperty]}return currentObject},this.getCleanObject=function(obj){return JSON.parse(JSON.stringify(obj))},this.findObjectByKeyPath=function(objectArray,keyPathArray,childrenListProperty,keyProperty){for(var keyPathCopy=keyPathArray.slice(),currentKey=keyPathCopy.shift(),obj=null;void 0!==currentKey;){if(!objectArray)return null;if(null===(obj=findTraverseObjects(objectArray,currentKey,keyProperty)))return obj;void 0===(objectArray=this.getObjectProperty(obj,childrenListProperty))&&(objectArray=[]),currentKey=keyPathCopy.shift()}return obj},this.findObjectsByProperty=function(objectArray,childrenListProperty,propertyName,propertyValue,path){var result=[];return function traverse(objects){for(var index=0;index<objects.length;index++){var object=objects[index];object[propertyName]===propertyValue&&result.push(object),traverse(object[childrenListProperty]||[])}}(objectArray),result},this.getObjectPathByProperty=function(objectArray,childrenListProperty,propertyName,propertyValue){return function traverse(objects,path){for(var index=0;index<objects.length;index++){var object=objects[index],currentPropertyValue=object[propertyName];if(currentPropertyValue===propertyValue)return path.concat(currentPropertyValue);var childPath=traverse(object[childrenListProperty]||[],path.concat(currentPropertyValue));if(childPath)return childPath}}(objectArray,[])},this.findObjectParentInfoByProperty=function(objectArray,childrenListProperty,propertyName,propertyValue){return function traverse(objects){for(var index=0;index<objects.length;index++){var object=objects[index];if(object[propertyName]===propertyValue)return{parentArray:objects,index:index,object:object};var subtreeResult=traverse(object[childrenListProperty]||[]);if(subtreeResult)return subtreeResult}}(objectArray)},this.getFlattenNodes=function(objectArray,childrenListProperty){var result=[];return function traverse(objects){for(var index=0;index<objects.length;index++){var object=objects[index];traverse(object[childrenListProperty]||[]),result.push(object)}}(objectArray),result},this.stringHashCode=function(value){var i,hash=0;for(i=0;i<value.length;i++)hash=(hash<<5)-hash+value.charCodeAt(i),hash|=0;return hash},this.syncObjectProperties=function(srcObj,destObj){for(var srcProp in srcObj)srcObj.hasOwnProperty(srcProp)&&(destObj[srcProp]=srcObj[srcProp]);for(var destProp in destObj)destObj.hasOwnProperty(destProp)&&(srcObj.hasOwnProperty(destProp)||delete destObj[destProp])},this.stringFuzzySearch=function(query,str){for(var queryArray=query.split(" "),wordsFound=0,index=0;index<queryArray.length;index++)-1!==str.indexOf(queryArray[index])&&wordsFound++;return wordsFound==queryArray.length},this.getRelativeOffset=function(element1,element2){var offset1=$(element1).offset(),offset2=$(element2).offset();return{left:offset1.left-offset2.left,top:offset1.top-offset2.top}}}}(window.jQuery),function($){"use strict";var tooltips=new function(){var $tooltipElement=null,tooltipTimeout=null;function clearTooltipTimeout(){null!==tooltipTimeout&&clearTimeout(tooltipTimeout),tooltipTimeout=null}function destroyTooltip(){$tooltipElement&&($tooltipElement.addClass("tooltip-invisible"),setTimeout((function(){$tooltipElement.addClass("tooltip-hidden")}),150))}function onMouseEnter(ev){ev.target&&ev.target.getAttribute&&ev.target.dataset&&ev.target.getAttribute("data-tooltip-text")&&(clearTooltipTimeout(),destroyTooltip(),tooltipTimeout=setTimeout((function(){!function(element){$tooltipElement||($tooltipElement=$('<div class="october-tooltip tooltip-hidden tooltip-invisible"><span class="tooltip-text"></span><span class="tooltip-hotkey"></span></div>'),$(document.body).append($tooltipElement)),$tooltipElement.find(".tooltip-text").text(element.getAttribute("data-tooltip-text"));var tooltipHotkey=element.getAttribute("data-tooltip-hotkey"),hotkeySpan=$tooltipElement.find(".tooltip-hotkey").html("");tooltipHotkey&&tooltipHotkey.split(",").forEach((function(hotkeys){hotkeySpan.append($("<i>").text(hotkeys.trim()))})),$tooltipElement.removeClass("tooltip-hidden"),$tooltipElement.css("left",0);var $element=$(element),elementOffset=$element.offset(),elementWidth=$element.outerWidth(),elementHeight=$element.height(),tooltipWidth=$tooltipElement.outerWidth(),bodyWidth=$(document.body).width(),left=Math.round(elementOffset.left+elementWidth/2-tooltipWidth/2);left<0&&(left=15);var rightDiff=left+tooltipWidth-bodyWidth;rightDiff>0&&(left-=rightDiff+15),$tooltipElement.css({left:left,top:elementOffset.top+elementHeight+5}),$tooltipElement.removeClass("tooltip-invisible")}(ev.target)}),300))}function onMouseLeave(ev){ev.target&&ev.target.getAttribute&&ev.target.dataset&&ev.target.getAttribute("data-tooltip-text")&&(clearTooltipTimeout(),destroyTooltip())}function onMouseDown(ev){destroyTooltip()}function onKeyDown(ev){destroyTooltip()}document.addEventListener("mouseenter",onMouseEnter,!0),document.addEventListener("mouseleave",onMouseLeave,!0),document.addEventListener("mousedown",onMouseDown),document.addEventListener("click",onMouseDown),document.addEventListener("keydown",onKeyDown),this.clear=function(){clearTooltipTimeout(),destroyTooltip()}};$.oc.octoberTooltips={clear:function(){tooltips.clear()}}}(window.jQuery),function($){"use strict";$.oc.module=new function(){this.modules=new Map,this.register=function(namespace,registrationFn){this.modules.has(namespace)?console.info("Module namespace is already registered: "+namespace):this.modules.set(namespace,registrationFn())},this.import=function(namespace){if(!this.exists(namespace))throw new Error("Module namespace is not registered: "+namespace);return this.modules.get(namespace)},this.exists=function(namespace){return this.modules.has(namespace)}}}($),$.oc.module.register("backend.october.vueapp",(function(){"use strict";return class{state;methods;containers;constructor(){this.methods={},this.containers={},this.state={processing:!1,lang:{}},this.registerMethods(),document.addEventListener("DOMContentLoaded",(()=>{this.loadInitialState(),this.initListeners(),this.initContainers()}),!1)}registerMethod(name,fn){this.methods[name]=fn}registerMethods(){this.registerMethod("onCommand",((command,isHotkey,ev,targetElement,customData)=>this.onCommand(command,isHotkey,ev,targetElement,customData)))}getLangString(key){return this.state.lang[key]}loadInitialState(){document.querySelectorAll("[data-vue-state]").forEach((element=>{const stateIndex=element.getAttribute("data-vue-state");this.state[stateIndex]=JSON.parse(element.innerHTML)}))}onBeforeContainersInit(){}async onCommand(command,isHotkey,ev,targetElement,customData){let parts=command.split(":");if(2==parts.length&&"form"!==parts[0])throw new Error("Unknown command: "+command);let requestData={},customDataOptions=customData||{};if(customDataOptions.request&&(requestData=customData.request),customDataOptions.confirm)try{await $.oc.confirmPromise(customDataOptions.confirm)}catch(error){return Promise.reject()}return this.state.processing=!0,this.ajaxRequest(targetElement,parts[1],requestData).finally((()=>{this.state.processing=!1}))}isFormCommand(command){let parts=command.split(":");return 2===parts.length&&"form"===parts[0]}ajaxRequest(element,handler,requestData){return new Promise((function(resolve,reject,onCancel){const request=$(element).request(handler,requestData);request.fail&&request.fail((function(data){reject(data)})),request.done&&request.done((function(data){resolve(data)})),onCancel((function(){request.abort()}))}))}initContainers(){document.querySelectorAll("[data-vue-container]").forEach((element=>{this.initContainerLang(element)})),this.onBeforeContainersInit(),document.querySelectorAll("[data-vue-container]").forEach((element=>{const containerName=element.getAttribute("data-vue-container"),vm=new Vue({data:{state:this.state},el:element,methods:this.methods});containerName&&(this.containers[containerName]=vm)}))}initContainerLang(element){const dataElements=Object.assign({},element.dataset);Object.keys(dataElements).forEach(((key,index)=>{key.startsWith("lang")&&(this.state.lang[key.substring(4)]=dataElements[key])}))}initListeners(){}}})),$.ajaxPrefilter((function(options){var token=$('meta[name="csrf-token"]').attr("content");token&&(options.headers||(options.headers={}),options.headers["X-CSRF-TOKEN"]=token)})),void 0===$.oc&&($.oc={}),$.oc.backendUrl=function(url){var backendBasePath=$('meta[name="backend-base-path"]').attr("content");return backendBasePath?("/"==url.substr(0,1)&&(url=url.substr(1)),backendBasePath+"/"+url):url},$.oc.backendCalculateTopContainerOffset=function(){var height=$("#layout-mainmenu > .main-menu-container").outerHeight();return $("#layout-banner-area").length&&(height+=$("#layout-banner-area").outerHeight()),height};var AssetManager=function(){var o={load:function(collection,callback){var jsList=collection.js?collection.js:[],cssList=collection.css?collection.css:[],imgList=collection.img?collection.img:[];jsList=$.grep(jsList,(function(item){return 0==$('head script[src="'+item+'"]').length})),cssList=$.grep(cssList,(function(item){return 0==$('head link[href="'+item+'"]').length}));var cssCounter=0,jsLoaded=!1,imgLoaded=!1;function checkLoaded(){return!!imgLoaded&&(!!jsLoaded&&(!(cssCounter<cssList.length)&&void(callback&&callback())))}0!==jsList.length||0!==cssList.length||0!==imgList.length?(o.loadJavaScript(jsList,(function(){jsLoaded=!0,checkLoaded()})),$.each(cssList,(function(index,source){o.loadStyleSheet(source,(function(){cssCounter++,checkLoaded()}))})),o.loadImage(imgList,(function(){imgLoaded=!0,checkLoaded()}))):callback&&callback()},loadStyleSheet:function(source,callback){var cssElement=document.createElement("link");return cssElement.setAttribute("rel","stylesheet"),cssElement.setAttribute("type","text/css"),cssElement.setAttribute("href",source),cssElement.addEventListener("load",callback,!1),void 0!==cssElement&&document.getElementsByTagName("head")[0].appendChild(cssElement),cssElement},loadJavaScript:function(sources,callback){if(sources.length<=0)return callback();var source=sources.shift(),jsElement=document.createElement("script");jsElement.setAttribute("type","text/javascript"),jsElement.setAttribute("src",source),jsElement.addEventListener("load",(function(){o.loadJavaScript(sources,callback)}),!1),void 0!==jsElement&&document.getElementsByTagName("head")[0].appendChild(jsElement)},loadImage:function(sources,callback){if(sources.length<=0)return callback();var loaded=0;$.each(sources,(function(index,source){var img=new Image;img.onload=function(){++loaded==sources.length&&callback&&callback()},img.src=source}))}};return o},assetManager=new AssetManager;if(void 0===$.oc&&($.oc={}),$.oc.escapeHtmlString=function(string){var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return(""+string).replace(/[&<>"'\/]/g,(function(match){return htmlEscapes[match]}))},window.addEventListener("touchstart",(function onFirstTouch(){window.removeEventListener("touchstart",onFirstTouch,!1),$.cookie("oc-user-touch",1,{expires:365,path:"/"}),$(document.documentElement).addClass("user-touch")}),!1),window.MSInputMethodContext&&document.documentMode){function fixMediaManager(){var $el=$('div[data-control="media-manager"] .control-scrollpad');$el.height($el.parent().height())}function fixSidebar(){$("#layout-sidenav").height(Math.max($("#layout-body").innerHeight(),$(window).height()-$("#layout-mainmenu").height()))}$(window).on("resize",(function(){fixMediaManager(),fixSidebar()}))}/Firefox\/\d+[\d\.]*/.test(navigator.userAgent)&&"function"==typeof window.DragEvent&&"function"==typeof window.addEventListener&&function(){var cx,cy,px,py,ox,oy,sx,sy,lx,ly;function update(e){cx=e.clientX,cy=e.clientY,px=e.pageX,py=e.pageY,ox=e.offsetX,oy=e.offsetY,sx=e.screenX,sy=e.screenY,lx=e.layerX,ly=e.layerY}function assign(e){e._ffix_cx=cx,e._ffix_cy=cy,e._ffix_px=px,e._ffix_py=py,e._ffix_ox=ox,e._ffix_oy=oy,e._ffix_sx=sx,e._ffix_sy=sy,e._ffix_lx=lx,e._ffix_ly=ly}window.addEventListener("mousemove",update,!0),window.addEventListener("dragover",update,!0),window.addEventListener("dragstart",assign,!0),window.addEventListener("drag",assign,!0),window.addEventListener("dragend",assign,!0);var me=Object.getOwnPropertyDescriptors(window.MouseEvent.prototype),ue=Object.getOwnPropertyDescriptors(window.UIEvent.prototype);function getter(prop,repl){return function(){return me[prop]&&me[prop].get.call(this)||Number(this[repl])||0}}function layerGetter(prop,repl){return function(){return"dragover"===this.type&&ue[prop]?ue[prop].get.call(this):Number(this[repl])||0}}Object.defineProperties(window.DragEvent.prototype,{clientX:{get:getter("clientX","_ffix_cx")},clientY:{get:getter("clientY","_ffix_cy")},pageX:{get:getter("pageX","_ffix_px")},pageY:{get:getter("pageY","_ffix_py")},offsetX:{get:getter("offsetX","_ffix_ox")},offsetY:{get:getter("offsetY","_ffix_oy")},screenX:{get:getter("screenX","_ffix_sx")},screenY:{get:getter("screenY","_ffix_sy")},x:{get:getter("x","_ffix_cx")},y:{get:getter("y","_ffix_cy")},layerX:{get:layerGetter("layerX","_ffix_lx")},layerY:{get:layerGetter("layerY","_ffix_ly")}})}();
